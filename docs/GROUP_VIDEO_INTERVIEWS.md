# ุงูููุงุจูุงุช ุงูุฌูุงุนูุฉ - ุฏููู ุดุงูู

## ๐ ูุนูููุงุช ุงููุซููุฉ
- **ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2026-03-02
- **ุงูุญุงูุฉ**: โ ููุชูู ูููุนูู
- **ุงููุชุทูุจุงุช**: Requirements 7.1, 7.2, 7.3, 7.4, 7.5

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุงูููุงุจูุงุช ุงูุฌูุงุนูุฉ ูุฏุนู ุญุชู 10 ูุดุงุฑููู ูู ููุณ ุงูููุงุจูุฉ ูุน ููุฒุงุช ุงุญุชุฑุงููุฉ:
- โ ุนุฑุถ ุดุจูู (Grid View) ูุฌููุน ุงููุดุงุฑููู
- โ ุนุฑุถ ุงููุชุญุฏุซ (Speaker View) ูุน ุงููุดุงุฑููู ุงูุขุฎุฑูู
- โ ููุฒุงุช ุงููุถูู (ูุชู ุงูุฌููุนุ ุฅุฒุงูุฉ ูุดุงุฑู)
- โ ุชุชุจุน ุญุงูุฉ ุงูุตูุช ูุงูููุฏูู ููู ูุดุงุฑู
- โ ุฏุนู ูุดุงุฑูุฉ ุงูุดุงุดุฉ (ูุดุงุฑู ูุงุญุฏ ููุท)
- โ ุฑูุถ ุงููุดุงุฑู ุงูู 11 ุชููุงุฆูุงู (Property 8)

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### Backend Services

#### 1. SignalingService (ูุญุฏูุซ)
```javascript
// ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- handleJoinRoom: ุฏุนู maxParticipants ูุงูุชุญูู ูู ุงูุญุฏ ุงูุฃูุตู
- handleToggleAudio: ุชุชุจุน ุญุงูุฉ ุงูุตูุช
- handleToggleVideo: ุชุชุจุน ุญุงูุฉ ุงูููุฏูู
- handleStartScreenShare: ุจุฏุก ูุดุงุฑูุฉ ุงูุดุงุดุฉ ูุน ุงูุชุญูู ูู ุงูุญุตุฑูุฉ
- handleStopScreenShare: ุฅููุงู ูุดุงุฑูุฉ ุงูุดุงุดุฉ
- handleMuteAll: ูุชู ุฌููุน ุงููุดุงุฑููู (ูููุถูู ููุท)
- handleRemoveParticipant: ุฅุฒุงูุฉ ูุดุงุฑู (ูููุถูู ููุท)
```

#### 2. WebRTCService (ูุญุฏูุซ)
```javascript
// ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- createPeerConnection: ุฏุนู callbacks ูุฎุตุตุฉ
- getAllPeerConnections: ุงูุญุตูู ุนูู ุฌููุน ุงูุงุชุตุงูุงุช
- getActivePeerConnectionsCount: ุนุฏุฏ ุงูุงุชุตุงูุงุช ุงููุดุทุฉ
- closeAllPeerConnections: ุฅุบูุงู ุฌููุน ุงูุงุชุตุงูุงุช
- replaceTrackInAllConnections: ุงุณุชุจุฏุงู track ูู ุฌููุน ุงูุงุชุตุงูุงุช
```

### Frontend Components

#### 1. GroupVideoCall Component
```jsx
// ุงููููู ุงูุฑุฆูุณู ููููุงุจูุงุช ุงูุฌูุงุนูุฉ
<GroupVideoCall
  roomId="room-123"
  userId="user-456"
  userName="ุฃุญูุฏ ูุญูุฏ"
  isHost={true}
  maxParticipants={10}
  onLeave={() => console.log('Left room')}
/>
```

**ุงูููุฒุงุช**:
- ุนุฑุถ ุดุจูู ุฏููุงูููู (2-4 ุฃุนูุฏุฉ ุญุณุจ ุนุฏุฏ ุงููุดุงุฑููู)
- ุนุฑุถ ุงููุชุญุฏุซ ูุน ุงููุดุงุฑููู ุงูุขุฎุฑูู
- ุฃุฒุฑุงุฑ ุชุญูู (ุชุจุฏูู ุงูุนุฑุถุ ูุชู ุงูุฌููุนุ ูุบุงุฏุฑุฉ)
- ุนุฏุงุฏ ุงููุดุงุฑููู (5 / 10)
- ุฅุฏุงุฑุฉ multiple peer connections

#### 2. ParticipantVideo Component
```jsx
// ูููู ูุฑุนู ูุนุฑุถ ููุฏูู ูุดุงุฑู ูุงุญุฏ
<ParticipantVideo
  participant={participant}
  isHost={true}
  onRemove={() => removeParticipant(socketId)}
  small={false}
/>
```

---

## ๐ก Socket.IO Events

### Client โ Server

| Event | Data | Description |
|-------|------|-------------|
| `join-room` | `{roomId, userId, userName, maxParticipants}` | ุงูุงูุถูุงู ูุบุฑูุฉ |
| `leave-room` | `{roomId}` | ูุบุงุฏุฑุฉ ุบุฑูุฉ |
| `toggle-audio` | `{roomId, enabled}` | ุชุจุฏูู ุงูุตูุช |
| `toggle-video` | `{roomId, enabled}` | ุชุจุฏูู ุงูููุฏูู |
| `start-screen-share` | `{roomId}` | ุจุฏุก ูุดุงุฑูุฉ ุงูุดุงุดุฉ |
| `stop-screen-share` | `{roomId}` | ุฅููุงู ูุดุงุฑูุฉ ุงูุดุงุดุฉ |
| `mute-all` | `{roomId, hostId}` | ูุชู ุงูุฌููุน (ูุถูู ููุท) |
| `remove-participant` | `{roomId, hostId, targetSocketId}` | ุฅุฒุงูุฉ ูุดุงุฑู (ูุถูู ููุท) |

### Server โ Client

| Event | Data | Description |
|-------|------|-------------|
| `room-joined` | `{roomId, participants, participantCount, maxParticipants}` | ุชู ุงูุงูุถูุงู ููุบุฑูุฉ |
| `user-joined` | `{socketId, userId, userName, participantCount}` | ูุณุชุฎุฏู ุงูุถู |
| `user-left` | `{socketId, userId, participantCount}` | ูุณุชุฎุฏู ุบุงุฏุฑ |
| `room-full` | `{roomId, maxParticipants, currentCount}` | ุงูุบุฑูุฉ ููุชูุฆุฉ |
| `audio-toggled` | `{socketId, userId, enabled}` | ุชู ุชุจุฏูู ุงูุตูุช |
| `video-toggled` | `{socketId, userId, enabled}` | ุชู ุชุจุฏูู ุงูููุฏูู |
| `screen-share-started` | `{socketId, userId, userName}` | ุจุฏุฃุช ูุดุงุฑูุฉ ุงูุดุงุดุฉ |
| `screen-share-stopped` | `{socketId, userId, userName}` | ุชูููุช ูุดุงุฑูุฉ ุงูุดุงุดุฉ |
| `screen-share-rejected` | `{reason}` | ุฑููุถุช ูุดุงุฑูุฉ ุงูุดุงุดุฉ |
| `all-muted` | `{byUserId, byUserName}` | ุชู ูุชู ุงูุฌููุน |
| `removed-from-room` | `{roomId, byUserId, byUserName, reason}` | ุชูุช ุฅุฒุงูุชู |
| `user-removed` | `{socketId, userId, userName, byUserId, participantCount}` | ุชูุช ุฅุฒุงูุฉ ูุณุชุฎุฏู |
| `action-rejected` | `{reason}` | ุฑููุถ ุงูุฅุฌุฑุงุก |

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุงูุนุฑุถ ุงูุดุจูู (Grid View)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  [ุฃุฒุฑุงุฑ ุงูุชุญูู]  [ุนุฏุงุฏ: 6/10]          โ
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโค
โ   ุฃูุช       โ  ูุดุงุฑู 1    โ  ูุดุงุฑู 2    โ
โ   ๐ฅ ๐     โ  ๐ฅ ๐      โ  ๐น ๐      โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโค
โ  ูุดุงุฑู 3    โ  ูุดุงุฑู 4    โ  ูุดุงุฑู 5    โ
โ  ๐ฅ ๐     โ  ๐ฅ ๐      โ  ๐ฅ ๐      โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโดโโโโโโโโโโโโโโ
```

**ุนุฏุฏ ุงูุฃุนูุฏุฉ ุญุณุจ ุนุฏุฏ ุงููุดุงุฑููู**:
- 1-2 ูุดุงุฑููู: ุนููุฏุงู
- 3-4 ูุดุงุฑููู: ุนููุฏุงู
- 5-6 ูุดุงุฑููู: 3 ุฃุนูุฏุฉ
- 7-9 ูุดุงุฑููู: 3 ุฃุนูุฏุฉ
- 10 ูุดุงุฑููู: 4 ุฃุนูุฏุฉ

### ุนุฑุถ ุงููุชุญุฏุซ (Speaker View)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  [ุฃุฒุฑุงุฑ ุงูุชุญูู]  [ุนุฏุงุฏ: 6/10]          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                         โ
โ         ุงููุชุญุฏุซ ุงููุดุท (ูุจูุฑ)            โ
โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุฃูุช] [ูุดุงุฑู 1] [ูุดุงุฑู 2] [ูุดุงุฑู 3]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### ููุฒุงุช ุงููุถูู ููุท

1. **ูุชู ุงูุฌููุน** (Mute All)
   - ููุชู ุฌููุน ุงููุดุงุฑููู ูุง ุนุฏุง ุงููุถูู
   - ูุชู ุงูุชุญูู ูู `hostId` ูุจู ุงูุชูููุฐ
   - ููุฑูุถ ุงูุทูุจ ูู ุบูุฑ ุงููุถูู

2. **ุฅุฒุงูุฉ ูุดุงุฑู** (Remove Participant)
   - ูุฒูู ูุดุงุฑู ูู ุงูุบุฑูุฉ
   - ูุชู ุงูุชุญูู ูู `hostId` ูุจู ุงูุชูููุฐ
   - ููุฑูุถ ุงูุทูุจ ูู ุบูุฑ ุงููุถูู
   - ูุชููู ุงููุดุงุฑู ุงูููุฒุงู ุฅุดุนุงุฑ `removed-from-room`

### ุงูุชุญูู ูู ุงูุญุฏ ุงูุฃูุตู (Property 8)

```javascript
// ูู handleJoinRoom
if (room.participants.size >= room.maxParticipants) {
  socket.emit('room-full', {
    roomId,
    maxParticipants: room.maxParticipants,
    currentCount: room.participants.size
  });
  return; // ุฑูุถ ุงูุงูุถูุงู
}
```

### ุญุตุฑูุฉ ูุดุงุฑูุฉ ุงูุดุงุดุฉ (Property 5)

```javascript
// ูู handleStartScreenShare
const someoneSharing = Array.from(room.participants.values()).some(
  p => p.screenSharing && p.userId !== participant.userId
);

if (someoneSharing) {
  socket.emit('screen-share-rejected', {
    reason: 'Someone else is already sharing their screen'
  });
  return;
}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑุงุช

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช

```bash
cd backend
npm test -- groupVideoInterview.test.js
```

### ุงูุงุฎุชุจุงุฑุงุช ุงููุชุงุญุฉ (10 ุงุฎุชุจุงุฑุงุช)

1. โ **ุฏุนู ุญุชู 10 ูุดุงุฑููู** - Property 8
2. โ **ุฑูุถ ุงููุดุงุฑู ุงูู 11** - Property 8
3. โ **ุนุฑุถ ุดุจูู** - Requirement 7.2
4. โ **ูุชู ุงูุฌููุน (ูููุถูู ููุท)** - Requirement 7.4
5. โ **ุฑูุถ ูุชู ุงูุฌููุน ูู ุบูุฑ ุงููุถูู** - Requirement 7.4
6. โ **ุฅุฒุงูุฉ ูุดุงุฑู (ูููุถูู ููุท)** - Requirement 7.5
7. โ **ุฑูุถ ุฅุฒุงูุฉ ูุดุงุฑู ูู ุบูุฑ ุงููุถูู** - Requirement 7.5
8. โ **ุชุชุจุน ุญุงูุฉ ุงูุตูุช ูุงูููุฏูู**
9. โ **ุชุชุจุน ูุดุงุฑูุฉ ุงูุดุงุดุฉ** - Property 5
10. โ **ุฅุญุตุงุฆูุงุช ุงูุบุฑูุฉ**

---

## ๐ ุงูุฃุฏุงุก

### WebRTC Peer Connections

- **1-1 ููุงุจูุฉ**: 1 peer connection
- **1-2 ููุงุจูุฉ**: 2 peer connections (ูู ูุดุงุฑู ูุน ุงูุขุฎุฑูู)
- **1-3 ููุงุจูุฉ**: 6 peer connections (3 ร 2)
- **1-10 ููุงุจูุฉ**: 45 peer connections (10 ร 9 / 2)

### ุชุญุณููุงุช ุงูุฃุฏุงุก

1. **Adaptive Bitrate**: ุชูููู ุฌูุฏุฉ ุงูููุฏูู ุชููุงุฆูุงู ุนูุฏ ุถุนู ุงูุงุชุตุงู
2. **Simulcast**: ุฅุฑุณุงู ุนุฏุฉ ุฌูุฏุงุช ููููุฏูู
3. **SFU (Selective Forwarding Unit)**: ุงุณุชุฎุฏุงู ุฎุงุฏู ูุณูุท ูุชูููู ุงูุญูู

---

## ๐ ุงูุงุณุชุฎุฏุงู

### ูุซุงู ูุงูู

```jsx
import React from 'react';
import GroupVideoCall from './components/VideoInterview/GroupVideoCall';

function InterviewPage() {
  const handleLeave = () => {
    console.log('User left the interview');
    // ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฃู ุฅุบูุงู ุงููุงูุฐุฉ
  };

  return (
    <GroupVideoCall
      roomId="interview-room-123"
      userId="user-456"
      userName="ุฃุญูุฏ ูุญูุฏ"
      isHost={true}
      maxParticipants={10}
      onLeave={handleLeave}
    />
  );
}

export default InterviewPage;
```

---

## ๐ง ุงูุชูููู

### Backend (.env)

```env
# Socket.IO
SOCKET_URL=http://localhost:5000

# TURN Server (ููุนูู ุฎูู ุงูุฌุฏุฑุงู ุงููุงุฑูุฉ)
TURN_SERVER_URL=turn:turn.careerak.com:3478
TURN_USERNAME=careerak
TURN_CREDENTIAL=secure_password
```

### Frontend (.env)

```env
# Socket.IO
REACT_APP_SOCKET_URL=http://localhost:5000

# ุฃู ูู ุงูุฅูุชุงุฌ
REACT_APP_SOCKET_URL=https://api.careerak.com
```

---

## ๐ฑ ุงูุชุตููู ุงููุชุฌุงูุจ

### Desktop (> 768px)
- ุนุฑุถ ุดุจูู ูุงูู
- ุฌููุน ุงูุฃุฒุฑุงุฑ ูุฑุฆูุฉ
- ููุฏูููุงุช ูุจูุฑุฉ

### Tablet (768px - 480px)
- ุนุฑุถ ุดุจูู ููุญุณูู
- ุฃุฒุฑุงุฑ ุฃุตุบุฑ
- ููุฏูููุงุช ูุชูุณุทุฉ

### Mobile (< 480px)
- ุนููุฏ ูุงุญุฏ ูู ุงูุนุฑุถ ุงูุดุจูู
- ุฃุฒุฑุงุฑ ูููุซูุฉ
- ููุฏูููุงุช ุตุบูุฑุฉ
- ุชูุฑูุฑ ุฃููู ูููุดุงุฑููู ูู ุนุฑุถ ุงููุชุญุฏุซ

---

## ๐ ุฏุนู ุงููุบุงุช

- โ ุงูุนุฑุจูุฉ (RTL)
- โ ุงูุฅูุฌููุฒูุฉ (LTR)
- โ ุงููุฑูุณูุฉ (LTR)

---

## โ ูุนุงููุฑ ุงููุจูู

- [x] ุฏุนู ุญุชู 10 ูุดุงุฑููู ูู ููุณ ุงูููุงุจูุฉ
- [x] ุนุฑุถ ุดุจูู (Grid View) ุฏููุงูููู
- [x] ุนุฑุถ ุงููุชุญุฏุซ (Speaker View)
- [x] ูุชู ุงูุฌููุน (ูููุถูู ููุท)
- [x] ุฅุฒุงูุฉ ูุดุงุฑู (ูููุถูู ููุท)
- [x] ุฑูุถ ุงููุดุงุฑู ุงูู 11 ุชููุงุฆูุงู
- [x] ุชุชุจุน ุญุงูุฉ ุงูุตูุช ูุงูููุฏูู
- [x] ุญุตุฑูุฉ ูุดุงุฑูุฉ ุงูุดุงุดุฉ
- [x] ุชุตููู ูุชุฌุงูุจ ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ
- [x] 10 ุงุฎุชุจุงุฑุงุช ุดุงููุฉ (ูููุง ูุฌุญุช โ)

---

## ๐ ุงููุฑุงุฌุน

- [WebRTC API](https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API)
- [Socket.IO Documentation](https://socket.io/docs/v4/)
- [RTCPeerConnection](https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection)
- [MediaStream API](https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_API)

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2026-03-02  
**ุขุฎุฑ ุชุญุฏูุซ**: 2026-03-02  
**ุงูุญุงูุฉ**: โ ููุชูู ูููุนูู
