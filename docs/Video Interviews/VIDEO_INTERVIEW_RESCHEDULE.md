# ุฅุนุงุฏุฉ ุฌุฏููุฉ ููุงุจูุงุช ุงูููุฏูู - ุงูุชูุซูู ุงูุดุงูู

## ๐ ูุนูููุงุช ุงูููุฒุฉ
- **ุชุงุฑูุฎ ุงูุฅุถุงูุฉ**: 2026-03-02
- **ุงูุญุงูุฉ**: โ ููุชูู ูููุนูู
- **ุงููุชุทูุจุงุช**: Requirements 5.4, 5.6

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ููุฒุฉ ุฅุนุงุฏุฉ ุฌุฏููุฉ ููุงุจูุงุช ุงูููุฏูู ุชุณูุญ ูููุถูู ุฃู ุงููุดุงุฑููู ุจุชุบููุฑ ููุนุฏ ุงูููุงุจูุฉ ูุน ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ ูุฌููุน ุงูุฃุทุฑุงู ุงููุนููุฉ.

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

1. **ุฅุนุงุฏุฉ ุฌุฏููุฉ ูุฑูุฉ**
   - ูููู ูููุถูู ุฃู ุฃู ูุดุงุฑู ุฅุนุงุฏุฉ ุงูุฌุฏููุฉ
   - ุชุญุฏูุฏ ููุนุฏ ุฌุฏูุฏ ูู ุงููุณุชูุจู
   - ุฅุถุงูุฉ ุณุจุจ ุงุฎุชูุงุฑู ูุฅุนุงุฏุฉ ุงูุฌุฏููุฉ

2. **ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ**
   - ุฅุดุนุงุฑุงุช ุฏุงุฎู ุงูุชุทุจูู ูุฌููุน ุงููุดุงุฑููู
   - ุจุฑูุฏ ุฅููุชุฑููู ููุตู ูุน ุงูููุนุฏ ุงููุฏูู ูุงูุฌุฏูุฏ
   - ุนุฑุถ ุงูุณุจุจ ุฅุฐุง ุชู ุชุญุฏูุฏู

3. **ุชุญุฏูุซ ุชููุงุฆู**
   - ุชุญุฏูุซ VideoInterview
   - ุชุญุฏูุซ Appointment ุงููุฑุชุจุท
   - ุชุญุฏูุซ ุญุงูุฉ ุงูููุงุจูุฉ ุฅูู 'rescheduled'

4. **ูููุฏ ุฃูุงู**
   - ููุท ุงููุดุงุฑููู ูููููู ุฅุนุงุฏุฉ ุงูุฌุฏููุฉ
   - ูุง ูููู ุฅุนุงุฏุฉ ุฌุฏููุฉ ููุงุจูุฉ ุจุฏุฃุช ุฃู ุงูุชูุช
   - ุงูููุนุฏ ุงูุฌุฏูุฏ ูุฌุจ ุฃู ูููู ูู ุงููุณุชูุจู

---

## ๐ง ุงูุชูููุฐ ุงูุชููู

### Backend API

**Endpoint**: `PUT /api/interviews/:id/reschedule`

**Authentication**: ูุทููุจ (Bearer Token)

**Request Body**:
```json
{
  "newScheduledAt": "2026-03-10T14:00:00.000Z",
  "reason": "ุธุฑู ุทุงุฑุฆ - ุฃุฑุฌู ุงููุนุฐุฑุฉ"
}
```

**Response (Success)**:
```json
{
  "success": true,
  "message": "ุชู ุฅุนุงุฏุฉ ุฌุฏููุฉ ุงูููุงุจูุฉ ุจูุฌุงุญ",
  "interview": {
    "id": "65f1234567890abcdef12345",
    "roomId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "oldScheduledAt": "2026-03-05T10:00:00.000Z",
    "newScheduledAt": "2026-03-10T14:00:00.000Z",
    "status": "rescheduled"
  }
}
```

**Response (Error)**:
```json
{
  "success": false,
  "message": "ูุง ูููู ุฅุนุงุฏุฉ ุฌุฏููุฉ ููุงุจูุฉ ุจุฏุฃุช ุฃู ุงูุชูุช"
}
```

---

## ๐ ุชุฏูู ุงูุนูู

```
1. ุงููุณุชุฎุฏู ูุทูุจ ุฅุนุงุฏุฉ ุงูุฌุฏููุฉ
   โ
2. ุงูุชุญูู ูู ุงูุตูุงุญูุงุช (ูุดุงุฑู ูู ุงูููุงุจูุฉุ)
   โ
3. ุงูุชุญูู ูู ุญุงูุฉ ุงูููุงุจูุฉ (ูู ุชุจุฏุฃ ุจุนุฏุ)
   โ
4. ุงูุชุญูู ูู ุงูููุนุฏ ุงูุฌุฏูุฏ (ูู ุงููุณุชูุจูุ)
   โ
5. ุชุญุฏูุซ VideoInterview
   โ
6. ุชุญุฏูุซ Appointment (ุฅุฐุง ูุงู ููุฌูุฏุงู)
   โ
7. ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูุฌููุน ุงููุดุงุฑููู
   โ
8. ุฅุฑุณุงู ุจุฑูุฏ ุฅููุชุฑููู ูุฌููุน ุงููุดุงุฑููู
   โ
9. ุฅุฑุฌุงุน ุงููุชูุฌุฉ
```

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุฅุนุงุฏุฉ ุฌุฏููุฉ ูู ุงููุถูู

```javascript
// Frontend
const rescheduleInterview = async (interviewId, newDate, reason) => {
  try {
    const response = await fetch(`/api/interviews/${interviewId}/reschedule`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`
      },
      body: JSON.stringify({
        newScheduledAt: newDate,
        reason: reason
      })
    });

    const data = await response.json();
    
    if (data.success) {
      alert('ุชู ุฅุนุงุฏุฉ ุฌุฏููุฉ ุงูููุงุจูุฉ ุจูุฌุงุญ');
      // ุชุญุฏูุซ UI
    } else {
      alert(data.message);
    }
  } catch (error) {
    console.error('Error:', error);
    alert('ูุดู ุฅุนุงุฏุฉ ุฌุฏููุฉ ุงูููุงุจูุฉ');
  }
};

// ุงูุงุณุชุฎุฏุงู
rescheduleInterview(
  '65f1234567890abcdef12345',
  '2026-03-10T14:00:00.000Z',
  'ุธุฑู ุทุงุฑุฆ - ุฃุฑุฌู ุงููุนุฐุฑุฉ'
);
```

### ูุซุงู 2: ุฅุนุงุฏุฉ ุฌุฏููุฉ ูู ุงููุดุงุฑู

```javascript
// ููุณ ุงูููุฏ ุฃุนูุงู - ูุนูู ูููุถูู ูุงููุดุงุฑููู
```

---

## ๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ูุญุชูู ุงูุจุฑูุฏ

ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุญุชูู ุนูู:

1. **ุฑุฃุณ ุฌุฐุงุจ** ูุน ุฃููููุฉ ๐
2. **ุชุญูุฉ ุดุฎุตูุฉ** ุจุงุณู ุงููุณุชูู
3. **ูุนูููุงุช ุงูููุงุจูุฉ**:
   - ุงูููุนุฏ ุงููุฏูู (ูุดุทูุจ)
   - ุงูููุนุฏ ุงูุฌุฏูุฏ (ูููุฒ)
   - ุงูุณุจุจ (ุฅุฐุง ุชู ุชุญุฏูุฏู)
4. **ุฒุฑ ููุงูุชูุงู** ุฅูู ุชูุงุตูู ุงูููุงุจูุฉ
5. **ุชุฐููุฑ** ุจุฅููุงููุฉ ุงูุงูุถูุงู ูุจู 5 ุฏูุงุฆู

### ุชุตููู ุงูุจุฑูุฏ

- ุชุตููู responsive ูุนูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ
- ุฃููุงู ุงููุดุฑูุน (#304B60, #D48161)
- ุฏุนู RTL ููุนุฑุจูุฉ
- ุชูุณูู ุงุญุชุฑุงูู ููุงุถุญ

---

## ๐ ุงูุฅุดุนุงุฑุงุช

### ุฅุดุนุงุฑ ุฏุงุฎู ุงูุชุทุจูู

```javascript
{
  type: 'interview_rescheduled',
  title: {
    ar: 'ุชู ุฅุนุงุฏุฉ ุฌุฏููุฉ ุงูููุงุจูุฉ',
    en: 'Interview Rescheduled',
    fr: 'Entretien reprogrammรฉ'
  },
  message: {
    ar: 'ูุงู ุฃุญูุฏ ูุญูุฏ ุจุฅุนุงุฏุฉ ุฌุฏููุฉ ุงูููุงุจูุฉ: ุธุฑู ุทุงุฑุฆ',
    en: 'Ahmed Mohamed has rescheduled the interview: Emergency',
    fr: 'Ahmed Mohamed a reprogrammรฉ l\'entretien: Urgence'
  },
  priority: 'high',
  relatedData: {
    videoInterview: '65f1234567890abcdef12345',
    appointment: '65f1234567890abcdef12346',
    oldScheduledAt: '2026-03-05T10:00:00.000Z',
    newScheduledAt: '2026-03-10T14:00:00.000Z',
    reason: 'ุธุฑู ุทุงุฑุฆ'
  }
}
```

---

## ๐๏ธ ุชุญุฏูุซุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

### VideoInterview Model

**ุฅุถุงูุฉ ุญุงูุฉ ุฌุฏูุฏุฉ**:
```javascript
status: {
  type: String,
  enum: ['scheduled', 'waiting', 'active', 'ended', 'cancelled', 'rescheduled'],
  default: 'scheduled'
}
```

### Notification Model

**ุฅุถุงูุฉ ููุน ุฌุฏูุฏ**:
```javascript
type: {
  type: String,
  enum: [
    // ... ุฃููุงุน ุฃุฎุฑู
    'interview_rescheduled',  // ุฌุฏูุฏ
    'system'
  ]
}
```

---

## โ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ูุฏูู

```bash
# 1. ุฅูุดุงุก ููุงุจูุฉ
POST /api/interviews/create
{
  "participants": ["userId1", "userId2"],
  "scheduledAt": "2026-03-05T10:00:00.000Z"
}

# 2. ุฅุนุงุฏุฉ ุงูุฌุฏููุฉ
PUT /api/interviews/:id/reschedule
{
  "newScheduledAt": "2026-03-10T14:00:00.000Z",
  "reason": "ุธุฑู ุทุงุฑุฆ"
}

# 3. ุงูุชุญูู ูู ุงูุฅุดุนุงุฑุงุช
GET /api/notifications

# 4. ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
# ุชุญูู ูู console logs ูู development mode
```

### ุญุงูุงุช ุงูุงุฎุชุจุงุฑ

1. โ ุฅุนุงุฏุฉ ุฌุฏููุฉ ูุงุฌุญุฉ ูู ุงููุถูู
2. โ ุฅุนุงุฏุฉ ุฌุฏููุฉ ูุงุฌุญุฉ ูู ุงููุดุงุฑู
3. โ ูุญุงููุฉ ุฅุนุงุฏุฉ ุฌุฏููุฉ ูู ูุณุชุฎุฏู ุบูุฑ ูุดุงุฑู
4. โ ูุญุงููุฉ ุฅุนุงุฏุฉ ุฌุฏููุฉ ููุงุจูุฉ ุจุฏุฃุช
5. โ ูุญุงููุฉ ุฅุนุงุฏุฉ ุฌุฏููุฉ ููุงุจูุฉ ุงูุชูุช
6. โ ูุญุงููุฉ ุฅุนุงุฏุฉ ุฌุฏููุฉ ุจููุนุฏ ูู ุงููุงุถู
7. โ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูุฌููุน ุงููุดุงุฑููู
8. โ ุฅุฑุณุงู ุจุฑูุฏ ุฅููุชุฑููู ูุฌููุน ุงููุดุงุฑููู
9. โ ุชุญุฏูุซ Appointment ุงููุฑุชุจุท

---

## ๐ ุงูุฃูุงู

### ุงูุชุญููุงุช ุงูุฃูููุฉ

1. **Authentication**: ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู
2. **Authorization**: ูุฌุจ ุฃู ูููู ูุดุงุฑูุงู ูู ุงูููุงุจูุฉ
3. **Validation**: ุงูุชุญูู ูู ุงูุจูุงูุงุช ุงููุฏุฎูุฉ
4. **State Check**: ุงูุชุญูู ูู ุญุงูุฉ ุงูููุงุจูุฉ
5. **Date Validation**: ุงูุชุญูู ูู ุฃู ุงูููุนุฏ ูู ุงููุณุชูุจู

---

## ๐ ุงูููุงุฆุฏ ุงููุชููุนุฉ

- ๐ ูุฑููุฉ ุฃูุจุฑ ูู ุฌุฏููุฉ ุงูููุงุจูุงุช
- ๐ง ุชูุงุตู ุชููุงุฆู ูุน ุฌููุน ุงูุฃุทุฑุงู
- โฐ ุชูููู ุญุงูุงุช ุนุฏู ุงูุญุถูุฑ
- ๐ ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- ๐ ุณูููุฉ ุฅุฏุงุฑุฉ ุงูููุงุนูุฏ

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

1. **ุชุฃููุฏ ุฅุนุงุฏุฉ ุงูุฌุฏููุฉ**: ุทูุจ ุชุฃููุฏ ูู ุงูุทุฑู ุงูุขุฎุฑ
2. **ุงูุชุฑุงุญ ููุงุนูุฏ ุจุฏููุฉ**: ุนุฑุถ ููุงุนูุฏ ูุชุงุญุฉ
3. **ุญุฏ ุฃูุตู ูุฅุนุงุฏุฉ ุงูุฌุฏููุฉ**: ููุน ุฅุนุงุฏุฉ ุงูุฌุฏููุฉ ุงููุชูุฑุฑุฉ
4. **ุชูุงูู ูุน ุงูุชูููู**: ุฅุถุงูุฉ ููุชูููู ุชููุงุฆูุงู
5. **ุฅุญุตุงุฆูุงุช**: ุชุชุจุน ูุนุฏู ุฅุนุงุฏุฉ ุงูุฌุฏููุฉ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. `backend/src/controllers/videoInterviewController.js` - ุฅุถุงูุฉ `rescheduleInterview`
2. `backend/src/routes/videoInterviewRoutes.js` - ุฅุถุงูุฉ route ุฌุฏูุฏ
3. `backend/src/services/emailService.js` - ุฅุถุงูุฉ `sendInterviewRescheduledEmail`
4. `backend/src/models/VideoInterview.js` - ุฅุถุงูุฉ ุญุงูุฉ 'rescheduled'
5. `backend/src/models/Notification.js` - ุฅุถุงูุฉ ููุน 'interview_rescheduled'

---

## ๐ ููุงุญุธุงุช ูููุฉ

- ุงูููุฒุฉ ุชุนูู ูููุถูู ูุงููุดุงุฑููู ุนูู ุญุฏ ุณูุงุก
- ูุชู ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูุฌููุน ุงููุดุงุฑููู ูุง ุนุฏุง ูู ูุงู ุจุฅุนุงุฏุฉ ุงูุฌุฏููุฉ
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุญุชูู ุนูู ุงูููุนุฏ ุงููุฏูู ูุงูุฌุฏูุฏ ูุงูุณุจุจ
- ูุชู ุชุญุฏูุซ Appointment ุงููุฑุชุจุท ุชููุงุฆูุงู
- ุงูุญุงูุฉ ุชุชุบูุฑ ุฅูู 'rescheduled' ุจุนุฏ ุฅุนุงุฏุฉ ุงูุฌุฏููุฉ

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2026-03-02  
**ุงูุญุงูุฉ**: โ ููุชูู ูููุนูู
