# Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…ØªØµÙØ­ - Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ù…Ù‚Ø§Ø¨Ù„Ø§Øª

## ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©
- **ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡**: 2026-03-01
- **Ø§Ù„Ø­Ø§Ù„Ø©**: âœ… Ù…ÙƒØªÙ…Ù„ ÙˆÙ…ÙØ¹Ù‘Ù„
- **Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª**: Requirements 3.3 (Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…ØªØµÙØ­)

---

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…ØªØµÙØ­ Ù‡ÙŠ Ù…ÙŠØ²Ø© ØªØ³Ù…Ø­ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø­ØªÙˆÙ‰ ØªØ¨ÙˆÙŠØ¨ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ØŒ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø£Ùˆ Ù†Ø§ÙØ°Ø© Ù…Ø­Ø¯Ø¯Ø©. Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…ÙÙŠØ¯Ø© Ø¬Ø¯Ø§Ù‹ Ø¹Ù†Ø¯Ù…Ø§:

- ØªØ±ÙŠØ¯ Ø¹Ø±Ø¶ Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨ Ø£Ùˆ ØªØ·Ø¨ÙŠÙ‚ ÙˆÙŠØ¨ Ù…Ø­Ø¯Ø¯
- ØªØ±ÙŠØ¯ Ù…Ø´Ø§Ø±ÙƒØ© ØµÙˆØª Ø§Ù„ØªØ¨ÙˆÙŠØ¨ (Ù…Ø«Ù„ ÙÙŠØ¯ÙŠÙˆ YouTube)
- ØªØ±ÙŠØ¯ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø®ØµÙˆØµÙŠØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
- ØªØ±ÙŠØ¯ ØªÙ‚Ù„ÙŠÙ„ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯

---

## âœ¨ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### 1. Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·
- âœ… Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø­ØªÙˆÙ‰ ØªØ¨ÙˆÙŠØ¨ Ù…Ø­Ø¯Ø¯
- âœ… Ø¹Ø²Ù„ Ø¹Ù† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
- âœ… Ø®ØµÙˆØµÙŠØ© Ø£ÙØ¶Ù„

### 2. Ù…Ø´Ø§Ø±ÙƒØ© ØµÙˆØª Ø§Ù„ØªØ¨ÙˆÙŠØ¨
- âœ… Ù…Ø´Ø§Ø±ÙƒØ© ØµÙˆØª Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
- âœ… Ù…Ø´Ø§Ø±ÙƒØ© ØµÙˆØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª
- âœ… Ø¬ÙˆØ¯Ø© ØµÙˆØª Ø¹Ø§Ù„ÙŠØ©

### 3. Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©
- âœ… Ø¯Ù‚Ø© 1080p (1920x1080)
- âœ… Ù…Ø¹Ø¯Ù„ Ø¥Ø·Ø§Ø±Ø§Øª 30fps
- âœ… Ø¬ÙˆØ¯Ø© ØµÙˆØª 48kHz

### 4. Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
- âœ… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø³ÙŠØ·Ø©
- âœ… ØªØ¨Ø¯ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†ÙˆØ§Ø¹
- âœ… Ø¥ÙŠÙ‚Ø§Ù Ø³Ù‡Ù„

---

## ğŸš€ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø³Ø±ÙŠØ¹

### Backend

```javascript
const ScreenShareService = require('./services/screenShareService');
const screenShareService = new ScreenShareService();

// Ø¨Ø¯Ø¡ Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨
const shareInfo = await screenShareService.startScreenShare(
  roomId,
  userId,
  'tab',
  stream
);

console.log('Tab share started:', shareInfo);
// {
//   success: true,
//   roomId: 'room-123',
//   userId: 'user-456',
//   type: 'tab',
//   quality: { width: 1920, height: 1080, frameRate: 30 },
//   startedAt: Date
// }

// Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
await screenShareService.stopScreenShare(roomId, userId);
```

### Frontend

```javascript
import ScreenShareService from './services/screenShareService';

const screenShareService = new ScreenShareService();

// Ø¨Ø¯Ø¡ Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨
const stream = await screenShareService.startTabShare();

// Ø¥Ø¶Ø§ÙØ© stream Ø¥Ù„Ù‰ peer connection
peerConnection.addStream(stream);

// Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
screenShareService.stopScreenShare();
```

### React Component

```jsx
import React, { useState } from 'react';
import ScreenShareControls from './components/VideoInterview/ScreenShareControls';

function VideoCallPage() {
  const [isSharing, setIsSharing] = useState(false);

  const handleShareStart = (stream, type) => {
    console.log('Sharing:', type);
    setIsSharing(true);
    // Ø¥Ø¶Ø§ÙØ© stream Ø¥Ù„Ù‰ WebRTC
  };

  const handleShareStop = () => {
    console.log('Stopped sharing');
    setIsSharing(false);
    // Ø¥Ø²Ø§Ù„Ø© stream Ù…Ù† WebRTC
  };

  return (
    <div>
      <ScreenShareControls
        onShareStart={handleShareStart}
        onShareStop={handleShareStop}
      />
    </div>
  );
}
```

---

## ğŸ“š API Reference

### Backend Service

#### `startScreenShare(roomId, userId, type, stream)`

Ø¨Ø¯Ø¡ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø©.

**Parameters:**
- `roomId` (string) - Ù…Ø¹Ø±Ù Ø§Ù„ØºØ±ÙØ©
- `userId` (string) - Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- `type` (string) - Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ('tab')
- `stream` (MediaStream) - stream Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©

**Returns:** `Promise<Object>`
```javascript
{
  success: true,
  roomId: string,
  userId: string,
  type: 'tab',
  quality: {
    width: number,
    height: number,
    frameRate: number
  },
  startedAt: Date
}
```

**Example:**
```javascript
const shareInfo = await screenShareService.startScreenShare(
  'room-123',
  'user-456',
  'tab',
  stream
);
```

---

#### `stopScreenShare(roomId, userId)`

Ø¥ÙŠÙ‚Ø§Ù Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø©.

**Parameters:**
- `roomId` (string) - Ù…Ø¹Ø±Ù Ø§Ù„ØºØ±ÙØ©
- `userId` (string) - Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

**Returns:** `Promise<Object>`
```javascript
{
  success: true,
  roomId: string,
  userId: string,
  duration: number // Ø¨Ø§Ù„Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©
}
```

**Example:**
```javascript
const result = await screenShareService.stopScreenShare('room-123', 'user-456');
console.log('Duration:', result.duration);
```

---

#### `getActiveShare(roomId)`

Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†Ø´Ø·Ø©.

**Parameters:**
- `roomId` (string) - Ù…Ø¹Ø±Ù Ø§Ù„ØºØ±ÙØ©

**Returns:** `Object|null`
```javascript
{
  userId: string,
  type: 'tab',
  quality: {
    width: number,
    height: number,
    frameRate: number
  },
  startedAt: Date,
  duration: number
}
```

**Example:**
```javascript
const shareInfo = screenShareService.getActiveShare('room-123');
if (shareInfo) {
  console.log('Sharing:', shareInfo.type);
}
```

---

### Frontend Service

#### `startTabShare()`

Ø¨Ø¯Ø¡ Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…ØªØµÙØ­.

**Returns:** `Promise<MediaStream>`

**Throws:** `Error` Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© Ù…ØªØ±Ø¬Ù…Ø©

**Example:**
```javascript
try {
  const stream = await screenShareService.startTabShare();
  console.log('Tab share started');
} catch (error) {
  console.error('Error:', error.message);
}
```

---

#### `startScreenShare(options)`

Ø¨Ø¯Ø¡ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¹ Ø®ÙŠØ§Ø±Ø§Øª Ù…Ø®ØµØµØ©.

**Parameters:**
- `options` (Object) - Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
  - `displaySurface` ('browser') - Ù†ÙˆØ¹ Ø§Ù„Ø³Ø·Ø­
  - `width` (number) - Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
  - `height` (number) - Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
  - `frameRate` (number) - Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ø·Ø§Ø±Ø§Øª
  - `audio` (boolean) - ØªØ¶Ù…ÙŠÙ† Ø§Ù„ØµÙˆØª

**Returns:** `Promise<MediaStream>`

**Example:**
```javascript
const stream = await screenShareService.startScreenShare({
  displaySurface: 'browser',
  width: 1920,
  height: 1080,
  frameRate: 30,
  audio: true
});
```

---

#### `stopScreenShare()`

Ø¥ÙŠÙ‚Ø§Ù Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø©.

**Returns:** `void`

**Example:**
```javascript
screenShareService.stopScreenShare();
```

---

#### `switchSource(newType)`

ØªØ¨Ø¯ÙŠÙ„ Ù…ØµØ¯Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.

**Parameters:**
- `newType` (string) - Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ('tab', 'screen', 'window')

**Returns:** `Promise<MediaStream>`

**Example:**
```javascript
// Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ù…Ù† Ø´Ø§Ø´Ø© Ø¥Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨
const stream = await screenShareService.switchSource('tab');
```

---

#### `isSharing()`

Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø´Ø§Ø±ÙƒØ© Ù†Ø´Ø·Ø©.

**Returns:** `boolean`

**Example:**
```javascript
if (screenShareService.isSharing()) {
  console.log('Currently sharing');
}
```

---

#### `getShareType()`

Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø­Ø§Ù„ÙŠ.

**Returns:** `string|null` - 'tab', 'screen', 'window', Ø£Ùˆ null

**Example:**
```javascript
const type = screenShareService.getShareType();
console.log('Sharing type:', type);
```

---

#### `getQuality()`

Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.

**Returns:** `Object|null`
```javascript
{
  width: number,
  height: number,
  frameRate: number,
  aspectRatio: number
}
```

**Example:**
```javascript
const quality = screenShareService.getQuality();
console.log('Quality:', quality.width, 'x', quality.height);
```

---

#### `static isSupported()`

Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø©.

**Returns:** `boolean`

**Example:**
```javascript
if (ScreenShareService.isSupported()) {
  console.log('Screen sharing is supported');
} else {
  console.log('Screen sharing is not supported');
}
```

---

## ğŸ¨ Ù…ÙƒÙˆÙ† ScreenShareControls

### Props

| Prop | Type | Required | Default | Description |
|------|------|----------|---------|-------------|
| `onShareStart` | function | No | - | ÙŠÙØ³ØªØ¯Ø¹Ù‰ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© |
| `onShareStop` | function | No | - | ÙŠÙØ³ØªØ¯Ø¹Ù‰ Ø¹Ù†Ø¯ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© |
| `disabled` | boolean | No | false | ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± |

### Events

#### `onShareStart(stream, type)`

ÙŠÙØ³ØªØ¯Ø¹Ù‰ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­.

**Parameters:**
- `stream` (MediaStream) - stream Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
- `type` (string) - Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ('tab', 'screen', 'window')

**Example:**
```jsx
<ScreenShareControls
  onShareStart={(stream, type) => {
    console.log('Started sharing:', type);
    peerConnection.addStream(stream);
  }}
/>
```

---

#### `onShareStop()`

ÙŠÙØ³ØªØ¯Ø¹Ù‰ Ø¹Ù†Ø¯ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.

**Example:**
```jsx
<ScreenShareControls
  onShareStop={() => {
    console.log('Stopped sharing');
    // ØªÙ†Ø¸ÙŠÙ
  }}
/>
```

---

## ğŸ”§ Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ WebRTC

### Ø¥Ø¶Ø§ÙØ© stream Ø¥Ù„Ù‰ peer connection

```javascript
const stream = await screenShareService.startTabShare();

// Ø¥Ø¶Ø§ÙØ© tracks
stream.getTracks().forEach(track => {
  peerConnection.addTrack(track, stream);
});

// Ø¥Ù†Ø´Ø§Ø¡ offer Ø¬Ø¯ÙŠØ¯
const offer = await peerConnection.createOffer();
await peerConnection.setLocalDescription(offer);

// Ø¥Ø±Ø³Ø§Ù„ offer Ø¹Ø¨Ø± signaling
signalingService.sendOffer(roomId, offer);
```

### Ø¥Ø²Ø§Ù„Ø© stream Ù…Ù† peer connection

```javascript
const senders = peerConnection.getSenders();
senders.forEach(sender => {
  if (sender.track && sender.track.kind === 'video') {
    peerConnection.removeTrack(sender);
  }
});

// Ø¥Ù†Ø´Ø§Ø¡ offer Ø¬Ø¯ÙŠØ¯
const offer = await peerConnection.createOffer();
await peerConnection.setLocalDescription(offer);

// Ø¥Ø±Ø³Ø§Ù„ offer Ø¹Ø¨Ø± signaling
signalingService.sendOffer(roomId, offer);
```

### Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ stream Ù…Ù† Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø±

```javascript
peerConnection.ontrack = (event) => {
  const stream = event.streams[0];
  
  // Ø¹Ø±Ø¶ stream ÙÙŠ video element
  remoteVideoRef.current.srcObject = stream;
  
  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
  const videoTrack = stream.getVideoTracks()[0];
  const settings = videoTrack.getSettings();
  
  if (settings.displaySurface === 'browser') {
    console.log('Receiving tab share');
  }
};
```

---

## ğŸ¯ Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ù…Ø«Ø§Ù„ 1: Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ø¨Ø³ÙŠØ·Ø©

```javascript
import ScreenShareService from './services/screenShareService';

const service = new ScreenShareService();

// Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
const stream = await service.startTabShare();

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
videoElement.srcObject = stream;

// Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
service.stopScreenShare();
```

---

### Ù…Ø«Ø§Ù„ 2: Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ù…Ø¹ ØµÙˆØª

```javascript
// Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ù…Ø¹ ØµÙˆØª (Ø§ÙØªØ±Ø§Ø¶ÙŠ)
const stream = await service.startTabShare();

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØµÙˆØª
const audioTracks = stream.getAudioTracks();
if (audioTracks.length > 0) {
  console.log('Audio is included');
}
```

---

### Ù…Ø«Ø§Ù„ 3: Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ù…Ø¹ Ø¬ÙˆØ¯Ø© Ù…Ø®ØµØµØ©

```javascript
const stream = await service.startScreenShare({
  displaySurface: 'browser',
  width: 1280,
  height: 720,
  frameRate: 60,
  audio: true
});

console.log('Tab share started with custom quality');
```

---

### Ù…Ø«Ø§Ù„ 4: Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ù…Ù† Ø´Ø§Ø´Ø© Ø¥Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨

```javascript
// Ø¨Ø¯Ø¡ Ù…Ø´Ø§Ø±ÙƒØ© Ø´Ø§Ø´Ø©
await service.startFullScreenShare();
console.log('Sharing screen');

// Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨
await service.switchSource('tab');
console.log('Now sharing tab');
```

---

### Ù…Ø«Ø§Ù„ 5: Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

```javascript
try {
  const stream = await service.startTabShare();
  console.log('Tab share started');
} catch (error) {
  if (error.message.includes('Ø±ÙØ¶')) {
    alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø©');
  } else if (error.message.includes('ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø©')) {
    alert('Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø©');
  } else {
    alert('Ø®Ø·Ø£: ' + error.message);
  }
}
```

---

### Ù…Ø«Ø§Ù„ 6: Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©

```javascript
window.addEventListener('screenshare-ended', () => {
  console.log('Tab share ended by user');
  
  // ØªØ­Ø¯ÙŠØ« UI
  setIsSharing(false);
  
  // ØªÙ†Ø¸ÙŠÙ
  videoElement.srcObject = null;
});
```

---

### Ù…Ø«Ø§Ù„ 7: Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ ÙÙŠ React

```jsx
import React, { useState, useRef, useEffect } from 'react';
import ScreenShareService from './services/screenShareService';

function TabShareComponent() {
  const [isSharing, setIsSharing] = useState(false);
  const [quality, setQuality] = useState(null);
  const videoRef = useRef(null);
  const serviceRef = useRef(new ScreenShareService());

  const handleStartShare = async () => {
    try {
      const stream = await serviceRef.current.startTabShare();
      
      if (videoRef.current) {
        videoRef.current.srcObject = stream;
      }
      
      setIsSharing(true);
      setQuality(serviceRef.current.getQuality());
    } catch (error) {
      console.error('Error:', error);
      alert(error.message);
    }
  };

  const handleStopShare = () => {
    serviceRef.current.stopScreenShare();
    
    if (videoRef.current) {
      videoRef.current.srcObject = null;
    }
    
    setIsSharing(false);
    setQuality(null);
  };

  useEffect(() => {
    const handleEnded = () => {
      handleStopShare();
    };

    window.addEventListener('screenshare-ended', handleEnded);

    return () => {
      window.removeEventListener('screenshare-ended', handleEnded);
      if (serviceRef.current.isSharing()) {
        serviceRef.current.stopScreenShare();
      }
    };
  }, []);

  return (
    <div>
      <h2>Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…ØªØµÙØ­</h2>
      
      <video ref={videoRef} autoPlay muted style={{ width: '100%' }} />
      
      {!isSharing ? (
        <button onClick={handleStartShare}>
          Ø¨Ø¯Ø¡ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        </button>
      ) : (
        <>
          <button onClick={handleStopShare}>
            Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
          </button>
          
          {quality && (
            <div>
              Ø§Ù„Ø¬ÙˆØ¯Ø©: {quality.width}x{quality.height} @ {quality.frameRate}fps
            </div>
          )}
        </>
      )}
    </div>
  );
}
```

---

## ğŸ› Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: "ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø©"

**Ø§Ù„Ø³Ø¨Ø¨:** Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø±ÙØ¶ Ø§Ù„Ø¥Ø°Ù† Ø£Ùˆ Ø£Ù„ØºÙ‰ Ø§Ù„Ø·Ù„Ø¨.

**Ø§Ù„Ø­Ù„:**
```javascript
try {
  await service.startTabShare();
} catch (error) {
  if (error.message.includes('Ø±ÙØ¶')) {
    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
    alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©');
  }
}
```

---

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: "Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø©"

**Ø§Ù„Ø³Ø¨Ø¨:** Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… getDisplayMedia API.

**Ø§Ù„Ø­Ù„:**
```javascript
if (!ScreenShareService.isSupported()) {
  alert('Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Chrome Ø£Ùˆ Firefox Ø£Ùˆ Edge.');
  return;
}
```

---

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙˆØª ÙÙŠ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨

**Ø§Ù„Ø³Ø¨Ø¨:** Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØµÙˆØª Ø£Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù… ÙŠØ³Ù…Ø­ Ø¨Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµÙˆØª.

**Ø§Ù„Ø­Ù„:**
```javascript
const stream = await service.startTabShare();
const audioTracks = stream.getAudioTracks();

if (audioTracks.length === 0) {
  console.warn('No audio tracks in tab share');
  // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
}
```

---

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø¬ÙˆØ¯Ø© Ù…Ù†Ø®ÙØ¶Ø©

**Ø§Ù„Ø³Ø¨Ø¨:** Ù‚ÙŠÙˆØ¯ Ø§Ù„Ø´Ø¨ÙƒØ© Ø£Ùˆ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬ÙˆØ¯Ø©.

**Ø§Ù„Ø­Ù„:**
```javascript
// Ø·Ù„Ø¨ Ø¬ÙˆØ¯Ø© Ø£Ø¹Ù„Ù‰
const stream = await service.startScreenShare({
  displaySurface: 'browser',
  width: 1920,
  height: 1080,
  frameRate: 60
});

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©
const quality = service.getQuality();
console.log('Actual quality:', quality);
```

---

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØªØªÙˆÙ‚Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

**Ø§Ù„Ø³Ø¨Ø¨:** Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£ØºÙ„Ù‚ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø£Ùˆ Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©" ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­.

**Ø§Ù„Ø­Ù„:**
```javascript
// Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø­Ø¯Ø« Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
window.addEventListener('screenshare-ended', () => {
  console.log('Share ended by user');
  // ØªØ­Ø¯ÙŠØ« UI
  setIsSharing(false);
});
```

---

## ğŸ“Š Ø¯Ø¹Ù… Ø§Ù„Ù…ØªØµÙØ­Ø§Øª

| Ø§Ù„Ù…ØªØµÙØ­ | Ø§Ù„Ø¥ØµØ¯Ø§Ø± | Ø§Ù„Ø¯Ø¹Ù… | Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
|---------|---------|--------|---------|
| Chrome | 72+ | âœ… ÙƒØ§Ù…Ù„ | Ø¯Ø¹Ù… Ù…Ù…ØªØ§Ø² |
| Firefox | 66+ | âœ… ÙƒØ§Ù…Ù„ | Ø¯Ø¹Ù… Ù…Ù…ØªØ§Ø² |
| Edge | 79+ | âœ… ÙƒØ§Ù…Ù„ | Ø¯Ø¹Ù… Ù…Ù…ØªØ§Ø² |
| Safari | 13+ | âš ï¸ Ø¬Ø²Ø¦ÙŠ | iOS 13+ ÙÙ‚Ø· |
| Opera | 60+ | âœ… ÙƒØ§Ù…Ù„ | Ø¯Ø¹Ù… Ø¬ÙŠØ¯ |

---

## ğŸ”’ Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©

### 1. Ø¥Ø°Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ø²Ø§Ù…ÙŠ
- âœ… Ø§Ù„Ù…ØªØµÙØ­ ÙŠØ·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¯Ø§Ø¦Ù…Ø§Ù‹
- âœ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ®ØªØ§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø±Ø§Ø¯ Ù…Ø´Ø§Ø±ÙƒØªÙ‡
- âœ… Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ Ø¨Ø¯ÙˆÙ† Ø¥Ø°Ù†

### 2. Ù…Ø¤Ø´Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
- âœ… Ø§Ù„Ù…ØªØµÙØ­ ÙŠØ¹Ø±Ø¶ Ù…Ø¤Ø´Ø± "ÙŠØ´Ø§Ø±Ùƒ Ø§Ù„Ø´Ø§Ø´Ø©"
- âœ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…ÙƒÙ†Ù‡ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª
- âœ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ø±Ø¶ Ù…Ø¤Ø´Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†Ø´Ø·Ø©

### 3. HTTPS Ø¥Ù„Ø²Ø§Ù…ÙŠ
- âœ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø© ØªØ¹Ù…Ù„ ÙÙ‚Ø· Ø¹Ù„Ù‰ HTTPS
- âœ… localhost Ù…Ø³Ù…ÙˆØ­ Ù„Ù„ØªØ·ÙˆÙŠØ±
- âœ… Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù‡Ø¬Ù…Ø§Øª

### 4. Ø¹Ø²Ù„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
- âœ… Ù…Ø´Ø§Ø±ÙƒØ© ØªØ¨ÙˆÙŠØ¨ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·
- âœ… Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ Ù…Ø­Ù…ÙŠØ©
- âœ… Ø®ØµÙˆØµÙŠØ© Ø£ÙØ¶Ù„

---

## ğŸ“ˆ Ø§Ù„Ø£Ø¯Ø§Ø¡

### Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ù‚ÙŠÙ…Ø© | Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
|---------|--------|---------|
| CPU | 5-15% | ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ |
| RAM | 50-100 MB | Ù„ÙƒÙ„ stream |
| Network | 1-3 Mbps | 1080p @ 30fps |
| Battery | Ù…ØªÙˆØ³Ø· | Ø£Ù‚Ù„ Ù…Ù† Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© |

### Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªØ­Ø³ÙŠÙ†

1. **Ø§Ø³ØªØ®Ø¯Ù… Ø¬ÙˆØ¯Ø© Ù…Ù†Ø§Ø³Ø¨Ø©**
```javascript
// Ù„Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø¨Ø·ÙŠØ¦Ø©
const stream = await service.startScreenShare({
  displaySurface: 'browser',
  width: 1280,
  height: 720,
  frameRate: 15
});
```

2. **Ø£ÙˆÙ‚Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù†Ø¯ Ø¹Ø¯Ù… Ø§Ù„Ø­Ø§Ø¬Ø©**
```javascript
// Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙˆØ±Ø§Ù‹
service.stopScreenShare();
```

3. **Ø±Ø§Ù‚Ø¨ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„**
```javascript
const quality = service.getQuality();
if (quality.frameRate < 15) {
  console.warn('Low frame rate detected');
  // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¬ÙˆØ¯Ø©
}
```

---

## âœ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

### ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª

```bash
cd frontend
npm test -- screenShareTab.test.js
```

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©

1. âœ… Tab Share Functionality (4 tests)
2. âœ… Tab Share Quality (3 tests)
3. âœ… Tab Share Audio (2 tests)
4. âœ… Tab Share Lifecycle (3 tests)
5. âœ… Tab Share vs Other Types (2 tests)
6. âœ… Tab Share Switching (3 tests)
7. âœ… Error Handling (3 tests)
8. âœ… Browser Support (2 tests)
9. âœ… Tab Share State Management (2 tests)
10. âœ… Tab Share with Custom Options (3 tests)

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹**: 27 Ø§Ø®ØªØ¨Ø§Ø±

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. âœ… Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªØ¨ÙˆÙŠØ¨ ØªØ¹Ù…Ù„ ÙÙ‚Ø· Ø¹Ù„Ù‰ HTTPS
2. âœ… ÙŠØªØ·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
3. âœ… Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· ÙÙŠ ÙƒÙ„ ØºØ±ÙØ©
4. âœ… ÙŠÙ…ÙƒÙ† Ù…Ø´Ø§Ø±ÙƒØ© ØµÙˆØª Ø§Ù„ØªØ¨ÙˆÙŠØ¨
5. âœ… Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© (1080p) Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
6. âœ… Ø¯Ø¹Ù… Chrome, Firefox, Edge, Safari (iOS 13+)
7. âœ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…ÙƒÙ†Ù‡ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª
8. âœ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©

---

## ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ù…ÙÙŠØ¯Ø©

- [MDN: getDisplayMedia](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia)
- [WebRTC Screen Sharing](https://webrtc.org/getting-started/screen-sharing)
- [Browser Compatibility](https://caniuse.com/mdn-api_mediadevices_getdisplaymedia)
- [Screen Capture API](https://w3c.github.io/mediacapture-screen-share/)

---

**ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡**: 2026-03-01  
**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«**: 2026-03-01  
**Ø§Ù„Ø­Ø§Ù„Ø©**: âœ… Ù…ÙƒØªÙ…Ù„ ÙˆÙ…ÙØ¹Ù‘Ù„
