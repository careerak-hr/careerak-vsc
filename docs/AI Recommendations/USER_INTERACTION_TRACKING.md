# ๐ค ูุธุงู ุชุชุจุน ุงูุชูุงุนูุงุช (User Interaction Tracking)

## ๐ ูุนูููุงุช ุงููุธุงู
- **ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2026-02-27
- **ุงูุญุงูุฉ**: โ ููุชูู ูููุนูู
- **ุงููุชุทูุจุงุช**: Requirements 6.1 (ุชุชุจุน ุฌููุน ุงูุชูุงุนูุงุช)
- **ุงูููุฒุฉ**: ูุธุงู ุงูุชูุตูุงุช ุงูุฐููุฉ (AI)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุชุชุจุน ุงูุชูุงุนูุงุช ูู ุฌุฒุก ุฃุณุงุณู ูู ูุธุงู ุงูุชูุตูุงุช ุงูุฐููุฉ. ูููู ุจุชุณุฌูู ูุชุญููู ุฌููุน ุชูุงุนูุงุช ุงููุณุชุฎุฏููู ูุน ุงูุชูุตูุงุช (ูุธุงุฆูุ ุฏูุฑุงุชุ ูุฑุดุญูู) ูุชุญุณูู ุฏูุฉ ุงูุชูุตูุงุช ุงููุณุชูุจููุฉ.

### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ
- โ ุชุชุจุน 5 ุฃููุงุน ูู ุงูุชูุงุนูุงุช (view, like, apply, ignore, save)
- โ ุญุณุงุจ ูุฏุฉ ุงููุดุงูุฏุฉ
- โ ุชุฎุฒูู ุงูุณูุงู ุงููุงูู ููุชูุงุนู
- โ ุชุญููู ุงูุฃููุงุท ุงูุณููููุฉ
- โ ุญุณุงุจ ูุนุฏู ุงูุชุญููู (CTR)
- โ ุชุญุฏูุซ ุงูุชูุตูุงุช ุชููุงุฆูุงู
- โ ุชุญููู ุงูุชูุถููุงุช
- โ ุฏุฑุฌุฉ ุงููุดุงุฑูุฉ (Engagement Score)

---

## ๐ ุฃููุงุน ุงูุชูุงุนูุงุช

| ุงูููุน | ุงููุตู | ุงููุฒู | ุงูุชุฃุซูุฑ |
|------|-------|-------|---------|
| **view** | ูุดุงูุฏุฉ ุงูุชูุตูุฉ | 0.5 | ูุญุงูุฏ - ูุดูุฑ ููุงูุชูุงู |
| **like** | ุงูุฅุนุฌุงุจ ุจุงูุชูุตูุฉ | 1.5 | ุฅูุฌุงุจู - ูุดูุฑ ููุชูุถูู |
| **apply** | ุงูุชูุฏูู ุนูู ุงููุธููุฉ | 2.0 | ุฅูุฌุงุจู ุฌุฏุงู - ุฃุนูู ูุฒู |
| **save** | ุญูุธ ุงูุชูุตูุฉ | 1.2 | ุฅูุฌุงุจู - ูุดูุฑ ููุงูุชูุงู ุงููุณุชูุจูู |
| **ignore** | ุชุฌุงูู ุงูุชูุตูุฉ | -1.0 | ุณูุจู - ูุดูุฑ ูุนุฏู ุงูุงูุชูุงู |

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### 1. ุงููููุฐุฌ (Model)
**ุงูููู**: `backend/src/models/UserInteraction.js`

```javascript
{
  userId: ObjectId,           // ุงููุณุชุฎุฏู
  itemType: String,           // job, course, candidate
  itemId: ObjectId,           // ุงูุนูุตุฑ
  action: String,             // view, like, apply, ignore, save
  duration: Number,           // ูุฏุฉ ุงููุดุงูุฏุฉ (ุซูุงูู)
  timestamp: Date,            // ููุช ุงูุชูุงุนู
  context: {
    sourcePage: String,       // ุตูุญุฉ ุงููุตุฏุฑ
    displayType: String,      // ุทุฑููุฉ ุงูุนุฑุถ
    position: Number,         // ูููุน ุงูุนูุตุฑ
    originalScore: Number,    // ุฏุฑุฌุฉ ุงูุชุทุงุจู ุงูุฃุตููุฉ
    metadata: Object          // ุจูุงูุงุช ุฅุถุงููุฉ
  },
  session: {
    sessionId: String,        // ูุนุฑู ุงูุฌูุณุฉ
    deviceType: String,       // desktop, mobile, tablet
    browser: String,          // ุงููุชุตูุญ
    platform: String          // ุงูููุตุฉ
  }
}
```

### 2. ุงูุฎุฏูุฉ (Service)
**ุงูููู**: `backend/src/services/userInteractionService.js`

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ**:
- `logInteraction()` - ุชุณุฌูู ุชูุงุนู ุฌุฏูุฏ
- `analyzeUserPreferences()` - ุชุญููู ุชูุถููุงุช ุงููุณุชุฎุฏู
- `extractPatternsFromInteractions()` - ุงุณุชุฎุฑุงุฌ ุงูุฃููุงุท
- `updateRecommendationsBasedOnPreferences()` - ุชุญุฏูุซ ุงูุชูุตูุงุช
- `calculateEngagementScore()` - ุญุณุงุจ ุฏุฑุฌุฉ ุงููุดุงุฑูุฉ

### 3. ุงููุนุงูุฌ (Controller)
**ุงูููู**: `backend/src/controllers/userInteractionController.js`

**Endpoints**:
- `POST /user-interactions/log` - ุชุณุฌูู ุชูุงุนู
- `GET /user-interactions` - ุฌูุจ ุงูุชูุงุนูุงุช
- `GET /user-interactions/stats` - ุงูุฅุญุตุงุกุงุช
- `GET /user-interactions/preferences` - ุงูุชูุถููุงุช
- `GET /user-interactions/conversion-rate` - ูุนุฏู ุงูุชุญููู
- `GET /user-interactions/patterns` - ุงูุฃููุงุท ุงูุณููููุฉ
- `POST /user-interactions/update-recommendations` - ุชุญุฏูุซ ุงูุชูุตูุงุช

### 4. ุงููุณุงุฑุงุช (Routes)
**ุงูููู**: `backend/src/routes/userInteractionRoutes.js`

ุฌููุน ุงููุณุงุฑุงุช ูุญููุฉ ุจู authentication middleware.

---

## ๐ ุงูุงุณุชุฎุฏุงู

### 1. ุชุณุฌูู ุชูุงุนู

```javascript
// Frontend
const response = await fetch('/api/user-interactions/log', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`
  },
  body: JSON.stringify({
    itemType: 'job',
    itemId: '507f1f77bcf86cd799439011',
    action: 'like',
    options: {
      duration: 30,
      sourcePage: 'recommendations',
      displayType: 'card',
      position: 1,
      originalScore: 85,
      sessionId: 'session-123',
      deviceType: 'desktop',
      browser: 'Chrome',
      platform: 'Windows'
    }
  })
});

const data = await response.json();
console.log(data);
// {
//   success: true,
//   message: 'ุชู ุชุณุฌูู ุงูุชูุงุนู ุจูุฌุงุญ',
//   data: { interaction: {...} }
// }
```

### 2. ุฌูุจ ุฅุญุตุงุกุงุช ุงููุณุชุฎุฏู

```javascript
const response = await fetch('/api/user-interactions/stats?itemType=job', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
});

const data = await response.json();
console.log(data);
// {
//   success: true,
//   data: {
//     interactionStats: {...},
//     conversionRate: {...},
//     preferences: {...},
//     summary: {
//       summary: 'ูุณุชุฎุฏู ูุดุท ูุน ุชูุงุนูุงุช ุฌูุฏุฉ',
//       level: 'intermediate',
//       totalInteractions: 25,
//       viewToApplyRate: 15.5,
//       engagementScore: 7.2
//     }
//   }
// }
```

### 3. ุชุญููู ุงูุฃููุงุท ุงูุณููููุฉ

```javascript
const response = await fetch('/api/user-interactions/patterns?itemType=job&limit=50', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
});

const data = await response.json();
console.log(data);
// {
//   success: true,
//   data: {
//     interactionCount: 50,
//     patterns: {
//       timeBased: {
//         timeSlots: { morning: 10, afternoon: 20, evening: 15, night: 5 },
//         preferredTime: 'afternoon'
//       },
//       actionSequences: {...},
//       scorePatterns: {...}
//     },
//     insights: [
//       {
//         type: 'time',
//         message: 'ุชูุถู ุงูุชูุงุนู ูุน ุงูุชูุตูุงุช ูู ุงูุธูุฑ',
//         confidence: 'high'
//       }
//     ]
//   }
// }
```

---

## ๐ ุชุญููู ุงูุฃููุงุท

### 1. ุงูุฃููุงุท ุงูุฒูููุฉ (Time Patterns)
ูุญูู ุงููุธุงู ูุชู ูุชูุงุนู ุงููุณุชุฎุฏู ูุน ุงูุชูุตูุงุช:
- **ุงูุตุจุงุญ** (6am - 12pm)
- **ุงูุธูุฑ** (12pm - 6pm)
- **ุงููุณุงุก** (6pm - 12am)
- **ุงูููู** (12am - 6am)

### 2. ุชุณูุณู ุงูุฅุฌุฑุงุกุงุช (Action Sequences)
ูุชุชุจุน ุงููุธุงู ุชุณูุณู ุงูุชูุงุนูุงุช:
- `view โ like` - ูุดุงูุฏุฉ ุซู ุฅุนุฌุงุจ
- `like โ apply` - ุฅุนุฌุงุจ ุซู ุชูุฏูู
- `view โ ignore` - ูุดุงูุฏุฉ ุซู ุชุฌุงูู

### 3. ุฃููุงุท ุงูุฏุฑุฌุงุช (Score Patterns)
ูุญูู ุงููุธุงู ุฏุฑุฌุงุช ุงูุชุทุงุจู ููุชูุตูุงุช ุงูุชู ูุชูุงุนู ูุนูุง ุงููุณุชุฎุฏู:
- ูุชูุณุท ุงูุฏุฑุฌุงุช
- ุงูุญุฏ ุงูุฃุฏูู ูุงูุฃูุตู
- ูุชูุณุท ุงูุฏุฑุฌุงุช ุญุณุจ ููุน ุงูุชูุงุนู

---

## ๐ฏ ูุนุฏู ุงูุชุญููู (Conversion Rate)

### ุงูููุงููุณ
- **View to Like**: ูุณุจุฉ ุงูุฅุนุฌุงุจุงุช ูู ุงููุดุงูุฏุงุช
- **View to Apply**: ูุณุจุฉ ุงูุชูุฏููุงุช ูู ุงููุดุงูุฏุงุช
- **View to Save**: ูุณุจุฉ ุงูุญูุธ ูู ุงููุดุงูุฏุงุช
- **Like to Apply**: ูุณุจุฉ ุงูุชูุฏููุงุช ูู ุงูุฅุนุฌุงุจุงุช

### ุงูุชูุณูุฑ

| ูุนุฏู View to Apply | ุงููุณุชูู | ุงูุชูุตูุฉ |
|-------------------|---------|---------|
| < 5% | ููุฎูุถ | ุฑุงุฌุน ุชูุถููุงุชู ููููู ุงูุดุฎุตู |
| 5-10% | ููุฎูุถ | ุญุงูู ุงูุชูุงุนู ูุน ุงูุชูุตูุงุช ุงูููุงุณุจุฉ |
| 10-20% | ูุชูุณุท | ููููู ุงูุชุญุณูู ุจุงูุชุฑููุฒ ุนูู ุงูุฃุนูู ุฏุฑุฌุฉ |
| 20-30% | ุฌูุฏ | ูุนุฏู ุฌูุฏุ ุงุณุชูุฑ |
| > 30% | ููุชุงุฒ | ูุนุฏู ููุชุงุฒ! |

---

## ๐ก ุฏุฑุฌุฉ ุงููุดุงุฑูุฉ (Engagement Score)

### ุงูุญุณุงุจ
```
Engagement Score = (Interaction Score + Conversion Score) / 2

ุญูุซ:
- Interaction Score = min(totalInteractions / 10, 10)
- Conversion Score = min(viewToApply / 5, 10)
```

### ุงููุณุชููุงุช

| ุงูุฏุฑุฌุฉ | ุงููุณุชูู | ุงููุตู |
|--------|---------|-------|
| 0-2 | ูุจุชุฏุฆ | ุชูุงุนูุงุช ููููุฉ ุฌุฏุงู |
| 2-5 | ูุชูุณุท | ุชูุงุนูุงุช ูุนุชุฏูุฉ |
| 5-8 | ุฌูุฏ | ุชูุงุนูุงุช ุฌูุฏุฉ |
| 8-10 | ููุชุงุฒ | ุชูุงุนูุงุช ููุชุงุฒุฉ |

---

## ๐ ุชุญุฏูุซ ุงูุชูุตูุงุช

### ููู ูุนููุ
1. **ุชุณุฌูู ุงูุชูุงุนู**: ุนูุฏ ูู ุชูุงุนูุ ูุชู ุชุณุฌููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุชุญููู ุงูุชูุถููุงุช**: ูุญูู ุงููุธุงู ุงูุชูุงุนูุงุช ูุงุณุชุฎุฑุงุฌ ุงูุชูุถููุงุช
3. **ุถุจุท ุงูุฏุฑุฌุงุช**: ูุชู ุถุจุท ุฏุฑุฌุงุช ุงูุชูุตูุงุช ุจูุงุกู ุนูู ุงูุชูุถููุงุช
4. **ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ**: ูุชู ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูุชูุตูุงุช ุญุณุจ ุงูุฏุฑุฌุงุช ุงูุฌุฏูุฏุฉ
5. **ุชุญุฏูุซ ุงูุฃุณุจุงุจ**: ูุชู ุชุญุฏูุซ ุฃุณุจุงุจ ุงูุชูุตูุงุช ูุชุดูู ุงูุชุนูู ูู ุงูุณููู

### ูุซุงู ุนูู ุงูุชุญุฏูุซ
```javascript
// ูุจู ุงูุชุญุฏูุซ
{
  score: 70,
  reasons: [
    { type: 'skills', message: 'ุชุทุงุจู 80% ูุน ููุงุฑุงุชู' }
  ]
}

// ุจุนุฏ ุงูุชุญุฏูุซ (ุจุนุฏ 20 ุชูุงุนู ุฅูุฌุงุจู)
{
  score: 82,  // ุฒูุงุฏุฉ ุจูุงุกู ุนูู ุงูุชูุงุนูุงุช
  reasons: [
    { type: 'skills', message: 'ุชุทุงุจู 80% ูุน ููุงุฑุงุชู' },
    { 
      type: 'behavior', 
      message: 'ุงูุชูุตูุฉ ูุจููุฉ ุนูู ุชุญููู ุชูุงุนูุงุชู ุงูุณุงุจูุฉ',
      details: { interactionCount: 20 }
    }
  ]
}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑุงุช

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
```bash
cd backend
npm test -- userInteraction.test.js
```

### ุงูุงุฎุชุจุงุฑุงุช ุงููุชุงุญุฉ
- โ Schema Validation (3 ุงุฎุชุจุงุฑุงุช)
- โ Instance Methods (4 ุงุฎุชุจุงุฑุงุช)
- โ Service Methods (6 ุงุฎุชุจุงุฑุงุช)
- โ Integration Tests (3 ุงุฎุชุจุงุฑุงุช)

**ุงููุฌููุน**: 16 ุงุฎุชุจุงุฑ

---

## ๐ ุงูููุงุฑุณ (Indexes)

ููุฃุฏุงุก ุงูุฃูุซูุ ุชู ุฅูุดุงุก ุงูููุงุฑุณ ุงูุชุงููุฉ:

```javascript
// ููุงุฑุณ ููุฑุฏุฉ
{ userId: 1 }
{ itemType: 1 }
{ action: 1 }
{ timestamp: -1 }

// ููุงุฑุณ ูุฑูุจุฉ
{ userId: 1, itemType: 1, action: 1, timestamp: -1 }
{ itemType: 1, itemId: 1, action: 1 }
{ userId: 1, 'context.sourcePage': 1, timestamp: -1 }
{ userId: 1, itemId: 1, action: 1 }
```

---

## ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### ุงููุตุงุฏูุฉ
- ุฌููุน endpoints ุชุชุทูุจ authentication
- ุงููุณุชุฎุฏู ููููู ููุท ุงููุตูู ูุชูุงุนูุงุชู ุงูุฎุงุตุฉ
- endpoints ุงูุฅุฏุงุฑูุฉ ุชุชุทูุจ ุตูุงุญูุงุช admin

### ุงูุฎุตูุตูุฉ
- ูุง ูุชู ูุดุงุฑูุฉ ุจูุงูุงุช ุงูุชูุงุนูุงุช ูุน ุฃุทุฑุงู ุซุงูุซุฉ
- ูููู ุญุฐู ุงูุชูุงุนูุงุช ุงููุฏููุฉ (> 90 ููู)
- ุงูุจูุงูุงุช ูุดูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### ุงููุฑุญูุฉ 1 (ูุตูุฑุฉ ุงููุฏู)
- [ ] ุชูุงูู ูุน ูุธุงู ML ููุชุฏุฑูุจ ุงููุนูู
- [ ] ุชุญููู ุงููุฆุงุช ูุงูููุฒุงุช ูู ุงูุนูุงุตุฑ
- [ ] A/B testing ููุชูุตูุงุช

### ุงููุฑุญูุฉ 2 (ูุชูุณุทุฉ ุงููุฏู)
- [ ] Real-time recommendations update
- [ ] Collaborative filtering ุจูุงุกู ุนูู ุงูุชูุงุนูุงุช
- [ ] ุชุญููู ูุชูุฏู ููุฃููุงุท ุงูุณููููุฉ

### ุงููุฑุญูุฉ 3 (ุทูููุฉ ุงููุฏู)
- [ ] Deep learning models
- [ ] Personalized recommendation engine
- [ ] Predictive analytics

---

## ๐ ุงููุฑุงุฌุน

- [Recommendation Systems](https://en.wikipedia.org/wiki/Recommender_system)
- [Collaborative Filtering](https://en.wikipedia.org/wiki/Collaborative_filtering)
- [Content-Based Filtering](https://en.wikipedia.org/wiki/Content-based_filtering)
- [User Behavior Analysis](https://www.nngroup.com/articles/user-behavior-analytics/)

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: careerak.hr@gmail.com
- ๐ ุงูุชูุซูู: `docs/AI Recommendations/`
- ๐ ุงูุฅุจูุงุบ ุนู ูุดุงูู: GitHub Issues

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2026-02-27  
**ุขุฎุฑ ุชุญุฏูุซ**: 2026-02-27  
**ุงูุญุงูุฉ**: โ ููุชูู ูููุนูู
