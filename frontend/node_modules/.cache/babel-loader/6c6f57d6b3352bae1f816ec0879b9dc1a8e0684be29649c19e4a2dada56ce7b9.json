{"ast":null,"code":"import _objectSpread from\"D:/Careerak/Careerak-vsc/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from'axios';import{Preferences}from'@capacitor/preferences';import CryptoJS from'crypto-js';const SERVER_NAME='https://careerak-server.loca.lt';const LOCAL_IPS=['192.168.152.151','192.168.1.5','192.168.1.10','192.168.1.100'];// ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© IPs Ø´Ø§Ø¦Ø¹Ø©\nconst PORT='5000';const SECRET_KEY='careerak_secure_key_2024';const getBaseURL=()=>{const manualURL=localStorage.getItem('manual_api_url');if(manualURL)return\"\".concat(manualURL,\"/api\");if(typeof window!=='undefined'&&(window.location.hostname==='localhost'||window.location.hostname==='127.0.0.1')){return\"http://localhost:\".concat(PORT,\"/api\");}// Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø«Ø§Ø¨Øª (Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„)\n// Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù„Ù€ IP Ø§Ù„Ø£ÙˆÙ„ (ÙˆÙ‡ÙƒØ°Ø§)\nreturn SERVER_NAME.startsWith('http')?\"\".concat(SERVER_NAME,\"/api\"):\"http://\".concat(LOCAL_IPS[0],\":\").concat(PORT,\"/api\");};const api=axios.create({baseURL:getBaseURL(),timeout:10000,// ØªÙ‚Ù„ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø®Ø·Ø£ Ø¨Ø³Ø±Ø¹Ø©\nheaders:{'Bypass-Tunnel-Reminder':'true'}});// âœ… ÙˆØ¸ÙŠÙØ© ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ø¢Ù…Ù†\nconst decryptToken=cipherText=>{try{const bytes=CryptoJS.AES.decrypt(cipherText,SECRET_KEY);return bytes.toString(CryptoJS.enc.Utf8);}catch(e){return null;}};const handleApiError=error=>{let userMessage='Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹';if(error.response){const status=error.response.status;const data=error.response.data;switch(status){case 400:userMessage=data.error||'Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚';break;case 401:userMessage='Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹';break;case 403:userMessage='Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„';break;case 404:userMessage='Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯';break;case 500:userMessage='Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥ØµÙ„Ø§Ø­';break;default:userMessage=data.error||userMessage;}console.error(\"\\uD83D\\uDD34 [API Error \".concat(status,\"]:\"),data);}else{userMessage='âš ï¸ Ø§Ù„Ø³ÙŠØ±ÙØ± ØºÙŠØ± Ù…ØªØµÙ„. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ù€ Backend ÙˆØ§ØªØµØ§Ù„Ùƒ Ø¨Ù†ÙØ³ Ø§Ù„Ø´Ø¨ÙƒØ©.';console.error('ðŸŒ [Network Error]: Check if server is running at',getBaseURL());}error.userMessage=userMessage;return error;};api.interceptors.request.use(async config=>{try{const{value:encryptedToken}=await Preferences.get({key:'auth_token'});if(encryptedToken){const token=decryptToken(encryptedToken);if(token)config.headers.Authorization=\"Bearer \".concat(token);}}catch(error){console.warn('Preferences fallback');}return config;},error=>Promise.reject(error));api.interceptors.response.use(response=>response,async error=>{const formattedError=handleApiError(error);if(error.response&&error.response.status===401){await Preferences.remove({key:'auth_token'});localStorage.removeItem('user');if(!window.location.pathname.includes('/auth'))window.location.href='/auth';}return Promise.reject(formattedError);});export const userService={register:userData=>api.post('/users/register',userData),login:credentials=>api.post('/users/login',credentials),getProfile:()=>api.get('/users/profile'),updateProfile:data=>api.put('/users/profile',data),verifyOTP:otp=>api.post('/users/verify-otp',{otp}),getAIRecommendations:()=>api.get('/users/ai-recommendations'),parseCV:cvBase64=>api.post('/users/parse-cv',{cvBase64})};export const jobPostingService={getAll:()=>api.get('/job-postings'),getById:id=>api.get(\"/job-postings/\".concat(id)),create:data=>api.post('/job-postings',data),apply:(jobId,data)=>api.post('/job-applications',_objectSpread({jobId},data))};export default api;","map":{"version":3,"names":["axios","Preferences","CryptoJS","SERVER_NAME","LOCAL_IPS","PORT","SECRET_KEY","getBaseURL","manualURL","localStorage","getItem","concat","window","location","hostname","startsWith","api","create","baseURL","timeout","headers","decryptToken","cipherText","bytes","AES","decrypt","toString","enc","Utf8","e","handleApiError","error","userMessage","response","status","data","console","interceptors","request","use","config","value","encryptedToken","get","key","token","Authorization","warn","Promise","reject","formattedError","remove","removeItem","pathname","includes","href","userService","register","userData","post","login","credentials","getProfile","updateProfile","put","verifyOTP","otp","getAIRecommendations","parseCV","cvBase64","jobPostingService","getAll","getById","id","apply","jobId","_objectSpread"],"sources":["D:/Careerak/Careerak-vsc/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { Preferences } from '@capacitor/preferences';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst SERVER_NAME = 'https://careerak-server.loca.lt'; \r\nconst LOCAL_IPS = ['192.168.152.151', '192.168.1.5', '192.168.1.10', '192.168.1.100']; // ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© IPs Ø´Ø§Ø¦Ø¹Ø©\r\nconst PORT = '5000';\r\nconst SECRET_KEY = 'careerak_secure_key_2024';\r\n\r\nconst getBaseURL = () => {\r\n  const manualURL = localStorage.getItem('manual_api_url');\r\n  if (manualURL) return `${manualURL}/api`;\r\n  \r\n  if (typeof window !== 'undefined' && (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')) {\r\n    return `http://localhost:${PORT}/api`;\r\n  }\r\n  \r\n  // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø«Ø§Ø¨Øª (Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ù…Ù„)\r\n  // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù„Ù€ IP Ø§Ù„Ø£ÙˆÙ„ (ÙˆÙ‡ÙƒØ°Ø§)\r\n  return SERVER_NAME.startsWith('http') ? `${SERVER_NAME}/api` : `http://${LOCAL_IPS[0]}:${PORT}/api`;\r\n};\r\n\r\nconst api = axios.create({\r\n  baseURL: getBaseURL(),\r\n  timeout: 10000, // ØªÙ‚Ù„ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø®Ø·Ø£ Ø¨Ø³Ø±Ø¹Ø©\r\n  headers: { 'Bypass-Tunnel-Reminder': 'true' }\r\n});\r\n\r\n// âœ… ÙˆØ¸ÙŠÙØ© ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ø¢Ù…Ù†\r\nconst decryptToken = (cipherText) => {\r\n  try {\r\n    const bytes = CryptoJS.AES.decrypt(cipherText, SECRET_KEY);\r\n    return bytes.toString(CryptoJS.enc.Utf8);\r\n  } catch (e) { return null; }\r\n};\r\n\r\nconst handleApiError = (error) => {\r\n  let userMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹';\r\n  if (error.response) {\r\n    const status = error.response.status;\r\n    const data = error.response.data;\r\n    switch (status) {\r\n      case 400: userMessage = data.error || 'Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚'; break;\r\n      case 401: userMessage = 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹'; break;\r\n      case 403: userMessage = 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„'; break;\r\n      case 404: userMessage = 'Ø§Ù„Ù…ÙˆØ±Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'; break;\r\n      case 500: userMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥ØµÙ„Ø§Ø­'; break;\r\n      default: userMessage = data.error || userMessage;\r\n    }\r\n    console.error(`ðŸ”´ [API Error ${status}]:`, data);\r\n  } else {\r\n    userMessage = 'âš ï¸ Ø§Ù„Ø³ÙŠØ±ÙØ± ØºÙŠØ± Ù…ØªØµÙ„. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ù€ Backend ÙˆØ§ØªØµØ§Ù„Ùƒ Ø¨Ù†ÙØ³ Ø§Ù„Ø´Ø¨ÙƒØ©.';\r\n    console.error('ðŸŒ [Network Error]: Check if server is running at', getBaseURL());\r\n  }\r\n  error.userMessage = userMessage;\r\n  return error;\r\n};\r\n\r\napi.interceptors.request.use(async (config) => {\r\n  try {\r\n    const { value: encryptedToken } = await Preferences.get({ key: 'auth_token' });\r\n    if (encryptedToken) {\r\n      const token = decryptToken(encryptedToken);\r\n      if (token) config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n  } catch (error) {\r\n    console.warn('Preferences fallback');\r\n  }\r\n  return config;\r\n}, (error) => Promise.reject(error));\r\n\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const formattedError = handleApiError(error);\r\n    if (error.response && error.response.status === 401) {\r\n      await Preferences.remove({ key: 'auth_token' });\r\n      localStorage.removeItem('user');\r\n      if (!window.location.pathname.includes('/auth')) window.location.href = '/auth';\r\n    }\r\n    return Promise.reject(formattedError);\r\n  }\r\n);\r\n\r\nexport const userService = {\r\n  register: (userData) => api.post('/users/register', userData),\r\n  login: (credentials) => api.post('/users/login', credentials),\r\n  getProfile: () => api.get('/users/profile'),\r\n  updateProfile: (data) => api.put('/users/profile', data),\r\n  verifyOTP: (otp) => api.post('/users/verify-otp', { otp }),\r\n  getAIRecommendations: () => api.get('/users/ai-recommendations'),\r\n  parseCV: (cvBase64) => api.post('/users/parse-cv', { cvBase64 })\r\n};\r\n\r\nexport const jobPostingService = {\r\n  getAll: () => api.get('/job-postings'),\r\n  getById: (id) => api.get(`/job-postings/${id}`),\r\n  create: (data) => api.post('/job-postings', data),\r\n  apply: (jobId, data) => api.post('/job-applications', { jobId, ...data })\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"sHAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,wBAAwB,CACpD,MAAO,CAAAC,QAAQ,KAAM,WAAW,CAEhC,KAAM,CAAAC,WAAW,CAAG,iCAAiC,CACrD,KAAM,CAAAC,SAAS,CAAG,CAAC,iBAAiB,CAAE,aAAa,CAAE,cAAc,CAAE,eAAe,CAAC,CAAE;AACvF,KAAM,CAAAC,IAAI,CAAG,MAAM,CACnB,KAAM,CAAAC,UAAU,CAAG,0BAA0B,CAE7C,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CACxD,GAAIF,SAAS,CAAE,SAAAG,MAAA,CAAUH,SAAS,SAElC,GAAI,MAAO,CAAAI,MAAM,GAAK,WAAW,GAAKA,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAK,WAAW,EAAIF,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAK,WAAW,CAAC,CAAE,CAC3H,0BAAAH,MAAA,CAA2BN,IAAI,SACjC,CAEA;AACA;AACA,MAAO,CAAAF,WAAW,CAACY,UAAU,CAAC,MAAM,CAAC,IAAAJ,MAAA,CAAMR,WAAW,mBAAAQ,MAAA,CAAmBP,SAAS,CAAC,CAAC,CAAC,MAAAO,MAAA,CAAIN,IAAI,QAAM,CACrG,CAAC,CAED,KAAM,CAAAW,GAAG,CAAGhB,KAAK,CAACiB,MAAM,CAAC,CACvBC,OAAO,CAAEX,UAAU,CAAC,CAAC,CACrBY,OAAO,CAAE,KAAK,CAAE;AAChBC,OAAO,CAAE,CAAE,wBAAwB,CAAE,MAAO,CAC9C,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,YAAY,CAAIC,UAAU,EAAK,CACnC,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGrB,QAAQ,CAACsB,GAAG,CAACC,OAAO,CAACH,UAAU,CAAEhB,UAAU,CAAC,CAC1D,MAAO,CAAAiB,KAAK,CAACG,QAAQ,CAACxB,QAAQ,CAACyB,GAAG,CAACC,IAAI,CAAC,CAC1C,CAAE,MAAOC,CAAC,CAAE,CAAE,MAAO,KAAI,CAAE,CAC7B,CAAC,CAED,KAAM,CAAAC,cAAc,CAAIC,KAAK,EAAK,CAChC,GAAI,CAAAC,WAAW,CAAG,yCAAyC,CAC3D,GAAID,KAAK,CAACE,QAAQ,CAAE,CAClB,KAAM,CAAAC,MAAM,CAAGH,KAAK,CAACE,QAAQ,CAACC,MAAM,CACpC,KAAM,CAAAC,IAAI,CAAGJ,KAAK,CAACE,QAAQ,CAACE,IAAI,CAChC,OAAQD,MAAM,EACZ,IAAK,IAAG,CAAEF,WAAW,CAAGG,IAAI,CAACJ,KAAK,EAAI,+BAA+B,CAAE,MACvE,IAAK,IAAG,CAAEC,WAAW,CAAG,wCAAwC,CAAE,MAClE,IAAK,IAAG,CAAEA,WAAW,CAAG,0BAA0B,CAAE,MACpD,IAAK,IAAG,CAAEA,WAAW,CAAG,0BAA0B,CAAE,MACpD,IAAK,IAAG,CAAEA,WAAW,CAAG,qCAAqC,CAAE,MAC/D,QAASA,WAAW,CAAGG,IAAI,CAACJ,KAAK,EAAIC,WAAW,CAClD,CACAI,OAAO,CAACL,KAAK,4BAAApB,MAAA,CAAkBuB,MAAM,OAAMC,IAAI,CAAC,CAClD,CAAC,IAAM,CACLH,WAAW,CAAG,qEAAqE,CACnFI,OAAO,CAACL,KAAK,CAAC,mDAAmD,CAAExB,UAAU,CAAC,CAAC,CAAC,CAClF,CACAwB,KAAK,CAACC,WAAW,CAAGA,WAAW,CAC/B,MAAO,CAAAD,KAAK,CACd,CAAC,CAEDf,GAAG,CAACqB,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,KAAO,CAAAC,MAAM,EAAK,CAC7C,GAAI,CACF,KAAM,CAAEC,KAAK,CAAEC,cAAe,CAAC,CAAG,KAAM,CAAAzC,WAAW,CAAC0C,GAAG,CAAC,CAAEC,GAAG,CAAE,YAAa,CAAC,CAAC,CAC9E,GAAIF,cAAc,CAAE,CAClB,KAAM,CAAAG,KAAK,CAAGxB,YAAY,CAACqB,cAAc,CAAC,CAC1C,GAAIG,KAAK,CAAEL,MAAM,CAACpB,OAAO,CAAC0B,aAAa,WAAAnC,MAAA,CAAakC,KAAK,CAAE,CAC7D,CACF,CAAE,MAAOd,KAAK,CAAE,CACdK,OAAO,CAACW,IAAI,CAAC,sBAAsB,CAAC,CACtC,CACA,MAAO,CAAAP,MAAM,CACf,CAAC,CAAGT,KAAK,EAAKiB,OAAO,CAACC,MAAM,CAAClB,KAAK,CAAC,CAAC,CAEpCf,GAAG,CAACqB,YAAY,CAACJ,QAAQ,CAACM,GAAG,CAC1BN,QAAQ,EAAKA,QAAQ,CACtB,KAAO,CAAAF,KAAK,EAAK,CACf,KAAM,CAAAmB,cAAc,CAAGpB,cAAc,CAACC,KAAK,CAAC,CAC5C,GAAIA,KAAK,CAACE,QAAQ,EAAIF,KAAK,CAACE,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CACnD,KAAM,CAAAjC,WAAW,CAACkD,MAAM,CAAC,CAAEP,GAAG,CAAE,YAAa,CAAC,CAAC,CAC/CnC,YAAY,CAAC2C,UAAU,CAAC,MAAM,CAAC,CAC/B,GAAI,CAACxC,MAAM,CAACC,QAAQ,CAACwC,QAAQ,CAACC,QAAQ,CAAC,OAAO,CAAC,CAAE1C,MAAM,CAACC,QAAQ,CAAC0C,IAAI,CAAG,OAAO,CACjF,CACA,MAAO,CAAAP,OAAO,CAACC,MAAM,CAACC,cAAc,CAAC,CACvC,CACF,CAAC,CAED,MAAO,MAAM,CAAAM,WAAW,CAAG,CACzBC,QAAQ,CAAGC,QAAQ,EAAK1C,GAAG,CAAC2C,IAAI,CAAC,iBAAiB,CAAED,QAAQ,CAAC,CAC7DE,KAAK,CAAGC,WAAW,EAAK7C,GAAG,CAAC2C,IAAI,CAAC,cAAc,CAAEE,WAAW,CAAC,CAC7DC,UAAU,CAAEA,CAAA,GAAM9C,GAAG,CAAC2B,GAAG,CAAC,gBAAgB,CAAC,CAC3CoB,aAAa,CAAG5B,IAAI,EAAKnB,GAAG,CAACgD,GAAG,CAAC,gBAAgB,CAAE7B,IAAI,CAAC,CACxD8B,SAAS,CAAGC,GAAG,EAAKlD,GAAG,CAAC2C,IAAI,CAAC,mBAAmB,CAAE,CAAEO,GAAI,CAAC,CAAC,CAC1DC,oBAAoB,CAAEA,CAAA,GAAMnD,GAAG,CAAC2B,GAAG,CAAC,2BAA2B,CAAC,CAChEyB,OAAO,CAAGC,QAAQ,EAAKrD,GAAG,CAAC2C,IAAI,CAAC,iBAAiB,CAAE,CAAEU,QAAS,CAAC,CACjE,CAAC,CAED,MAAO,MAAM,CAAAC,iBAAiB,CAAG,CAC/BC,MAAM,CAAEA,CAAA,GAAMvD,GAAG,CAAC2B,GAAG,CAAC,eAAe,CAAC,CACtC6B,OAAO,CAAGC,EAAE,EAAKzD,GAAG,CAAC2B,GAAG,kBAAAhC,MAAA,CAAkB8D,EAAE,CAAE,CAAC,CAC/CxD,MAAM,CAAGkB,IAAI,EAAKnB,GAAG,CAAC2C,IAAI,CAAC,eAAe,CAAExB,IAAI,CAAC,CACjDuC,KAAK,CAAEA,CAACC,KAAK,CAAExC,IAAI,GAAKnB,GAAG,CAAC2C,IAAI,CAAC,mBAAmB,CAAAiB,aAAA,EAAID,KAAK,EAAKxC,IAAI,CAAE,CAC1E,CAAC,CAED,cAAe,CAAAnB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}