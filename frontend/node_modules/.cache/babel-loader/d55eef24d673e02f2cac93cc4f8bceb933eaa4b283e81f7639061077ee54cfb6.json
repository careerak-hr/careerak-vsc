{"ast":null,"code":"import axios from'axios';import{Preferences}from'@capacitor/preferences';// العناوين المتاحة: السيرفر المحلي والجسر (Bridge)\nconst LOCAL_SERVER='http://192.168.1.5:5000/api';const TUNNEL_BRIDGE='https://careerak-server.loca.lt/api';const api=axios.create({baseURL:LOCAL_SERVER,timeout:15000,headers:{'Content-Type':'application/json','Bypass-Tunnel-Reminder':'true'}});// اكتشاف السيرفر\nexport const discoverBestServer=async()=>{const servers=[LOCAL_SERVER,TUNNEL_BRIDGE];for(const url of servers){try{await axios.get(\"\".concat(url,\"/users/health-check\"),{timeout:3000});api.defaults.baseURL=url;return url;}catch(e){continue;}}return api.defaults.baseURL;};// التوكن\napi.interceptors.request.use(async config=>{try{const{value:token}=await Preferences.get({key:'auth_token'});if(token){config.headers.Authorization=\"Bearer \".concat(token);}}catch(error){console.error('API Error:',error);}return config;},error=>Promise.reject(error));// الخدمات بالأسماء الصحيحة التي يتوقعها التطبيق\nexport const userService={register:userData=>api.post('/users/register',userData),login:credentials=>api.post('/users/login',credentials),getProfile:()=>api.get('/users/profile'),updateProfile:data=>api.put('/users/profile',data),healthCheck:()=>api.get('/users/health-check')};export const jobPostingService={getAll:()=>api.get('/job-postings'),getById:id=>api.get(\"/job-postings/\".concat(id)),create:data=>api.post('/job-postings',data)};export const educationalCourseService={getAll:()=>api.get('/educational-courses'),getById:id=>api.get(\"/educational-courses/\".concat(id))};export const trainingCourseService={getAll:()=>api.get('/training-courses'),getById:id=>api.get(\"/training-courses/\".concat(id))};export default api;","map":{"version":3,"names":["axios","Preferences","LOCAL_SERVER","TUNNEL_BRIDGE","api","create","baseURL","timeout","headers","discoverBestServer","servers","url","get","concat","defaults","e","interceptors","request","use","config","value","token","key","Authorization","error","console","Promise","reject","userService","register","userData","post","login","credentials","getProfile","updateProfile","data","put","healthCheck","jobPostingService","getAll","getById","id","educationalCourseService","trainingCourseService"],"sources":["D:/Careerak/Careerak-vsc/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { Preferences } from '@capacitor/preferences';\r\n\r\n// العناوين المتاحة: السيرفر المحلي والجسر (Bridge)\r\nconst LOCAL_SERVER = 'http://192.168.1.5:5000/api';\r\nconst TUNNEL_BRIDGE = 'https://careerak-server.loca.lt/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: LOCAL_SERVER,\r\n  timeout: 15000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Bypass-Tunnel-Reminder': 'true'\r\n  }\r\n});\r\n\r\n// اكتشاف السيرفر\r\nexport const discoverBestServer = async () => {\r\n  const servers = [LOCAL_SERVER, TUNNEL_BRIDGE];\r\n  for (const url of servers) {\r\n    try {\r\n      await axios.get(`${url}/users/health-check`, { timeout: 3000 });\r\n      api.defaults.baseURL = url;\r\n      return url;\r\n    } catch (e) {\r\n      continue;\r\n    }\r\n  }\r\n  return api.defaults.baseURL;\r\n};\r\n\r\n// التوكن\r\napi.interceptors.request.use(async (config) => {\r\n  try {\r\n    const { value: token } = await Preferences.get({ key: 'auth_token' });\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n  } catch (error) {\r\n    console.error('API Error:', error);\r\n  }\r\n  return config;\r\n}, (error) => Promise.reject(error));\r\n\r\n// الخدمات بالأسماء الصحيحة التي يتوقعها التطبيق\r\nexport const userService = {\r\n  register: (userData) => api.post('/users/register', userData),\r\n  login: (credentials) => api.post('/users/login', credentials),\r\n  getProfile: () => api.get('/users/profile'),\r\n  updateProfile: (data) => api.put('/users/profile', data),\r\n  healthCheck: () => api.get('/users/health-check')\r\n};\r\n\r\nexport const jobPostingService = {\r\n  getAll: () => api.get('/job-postings'),\r\n  getById: (id) => api.get(`/job-postings/${id}`),\r\n  create: (data) => api.post('/job-postings', data),\r\n};\r\n\r\nexport const educationalCourseService = {\r\n  getAll: () => api.get('/educational-courses'),\r\n  getById: (id) => api.get(`/educational-courses/${id}`),\r\n};\r\n\r\nexport const trainingCourseService = {\r\n  getAll: () => api.get('/training-courses'),\r\n  getById: (id) => api.get(`/training-courses/${id}`),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}