{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{useNavigate}from'react-router-dom';import{discoverBestServer}from'../services/api';import{useAuth}from'../context/AuthContext';import{App}from'@capacitor/app';import{jsx as _jsx}from\"react/jsx-runtime\";const entryTranslations={ar:{slogan:\"Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©\"},en:{slogan:\"The Future of HR\"},fr:{slogan:\"L'avenir des RH\"}};export default function EntryPage(){const[phase,setPhase]=useState(0);const navigate=useNavigate();const{audioEnabled,language}=useAuth();const t=entryTranslations[language]||entryTranslations.ar;const audioRef=useRef(null);const isMounted=useRef(true);useEffect(()=>{isMounted.current=true;// ðŸ”¥ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø³ÙŠØ±ÙØ± Ø£Ø«Ù†Ø§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ±ÙŠ\nconst initServer=async()=>{try{await discoverBestServer();}catch(error){console.log(\"Server still warming up\");}};initServer();const SYSTEM_DELAY=1000;const timers=[setTimeout(()=>{if(isMounted.current){setPhase(1);if(audioEnabled&&!audioRef.current){audioRef.current=new Audio('/intro.mp3');audioRef.current.volume=0.6;audioRef.current.play().catch(()=>{});}}},SYSTEM_DELAY),setTimeout(()=>setPhase(2),SYSTEM_DELAY+1500),setTimeout(()=>setPhase(3),SYSTEM_DELAY+7000),setTimeout(()=>{if(audioRef.current){audioRef.current.pause();audioRef.current=null;}navigate('/login',{replace:true});},SYSTEM_DELAY+9000)];const handleAppState=state=>{if(audioRef.current){if(state.isActive&&audioEnabled&&phase>=1){audioRef.current.play().catch(()=>{});}else{audioRef.current.pause();}}};const listener=App.addListener('appStateChange',handleAppState);return()=>{isMounted.current=false;timers.forEach(clearTimeout);if(audioRef.current){audioRef.current.pause();audioRef.current=null;}listener.then(l=>l.remove());};},[navigate,audioEnabled,phase]);return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-[10000] flex flex-col items-center justify-center overflow-hidden bg-[#E3DAD0] select-none\"});}","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","discoverBestServer","useAuth","App","jsx","_jsx","entryTranslations","ar","slogan","en","fr","EntryPage","phase","setPhase","navigate","audioEnabled","language","t","audioRef","isMounted","current","initServer","error","console","log","SYSTEM_DELAY","timers","setTimeout","Audio","volume","play","catch","pause","replace","handleAppState","state","isActive","listener","addListener","forEach","clearTimeout","then","l","remove","className"],"sources":["D:/Careerak/Careerak-vsc/frontend/src/pages/01_EntryPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { discoverBestServer } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { App } from '@capacitor/app';\r\n\r\nconst entryTranslations = {\r\n  ar: { slogan: \"Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©\" },\r\n  en: { slogan: \"The Future of HR\" },\r\n  fr: { slogan: \"L'avenir des RH\" }\r\n};\r\n\r\nexport default function EntryPage() {\r\n  const [phase, setPhase] = useState(0);\r\n  const navigate = useNavigate();\r\n  const { audioEnabled, language } = useAuth();\r\n  const t = entryTranslations[language] || entryTranslations.ar;\r\n\r\n  const audioRef = useRef(null);\r\n  const isMounted = useRef(true);\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n\r\n    // ðŸ”¥ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø³ÙŠØ±ÙØ± Ø£Ø«Ù†Ø§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ±ÙŠ\r\n    const initServer = async () => {\r\n      try {\r\n        await discoverBestServer();\r\n      } catch (error) {\r\n        console.log(\"Server still warming up\");\r\n      }\r\n    };\r\n    initServer();\r\n\r\n    const SYSTEM_DELAY = 1000;\r\n\r\n    const timers = [\r\n      setTimeout(() => {\r\n        if (isMounted.current) {\r\n          setPhase(1);\r\n          if (audioEnabled && !audioRef.current) {\r\n            audioRef.current = new Audio('/intro.mp3');\r\n            audioRef.current.volume = 0.6;\r\n            audioRef.current.play().catch(() => {});\r\n          }\r\n        }\r\n      }, SYSTEM_DELAY),\r\n\r\n      setTimeout(() => setPhase(2), SYSTEM_DELAY + 1500),\r\n      setTimeout(() => setPhase(3), SYSTEM_DELAY + 7000),\r\n\r\n      setTimeout(() => {\r\n        if (audioRef.current) {\r\n          audioRef.current.pause();\r\n          audioRef.current = null;\r\n        }\r\n        navigate('/login', { replace: true });\r\n      }, SYSTEM_DELAY + 9000)\r\n    ];\r\n\r\n    const handleAppState = (state) => {\r\n      if (audioRef.current) {\r\n        if (state.isActive && audioEnabled && phase >= 1) {\r\n          audioRef.current.play().catch(() => {});\r\n        } else {\r\n          audioRef.current.pause();\r\n        }\r\n      }\r\n    };\r\n\r\n    const listener = App.addListener('appStateChange', handleAppState);\r\n\r\n    return () => {\r\n      isMounted.current = false;\r\n      timers.forEach(clearTimeout);\r\n      if (audioRef.current) {\r\n        audioRef.current.pause();\r\n        audioRef.current = null;\r\n      }\r\n      listener.then(l => l.remove());\r\n    };\r\n  }, [navigate, audioEnabled, phase]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[10000] flex flex-col items-center justify-center overflow-hidden bg-[#E3DAD0] select-none\">\r\n      {/* (UI Ø¨Ø¯ÙˆÙ† Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„) */}\r\n      {/* â€¦ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¨ØµØ±ÙŠ ÙƒØ§Ù…Ù„ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¹Ù†Ø¯Ùƒ â€¦ */}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}