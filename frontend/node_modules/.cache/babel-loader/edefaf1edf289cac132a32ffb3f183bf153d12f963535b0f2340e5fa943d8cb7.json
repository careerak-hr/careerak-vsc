{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{useNavigate}from'react-router-dom';import{discoverBestServer}from'../services/api';import{useAuth}from'../context/AuthContext';import{App}from'@capacitor/app';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const entryTranslations={ar:{slogan:\"مستقبل الموارد البشرية\"},en:{slogan:\"The Future of HR\"},fr:{slogan:\"L'avenir des RH\"}};export default function EntryPage(){const[phase,setPhase]=useState(0);const navigate=useNavigate();const{audioEnabled,language}=useAuth();const t=entryTranslations[language]||entryTranslations.ar;const audioRef=useRef(new Audio('/intro.mp3'));useEffect(()=>{const audio=audioRef.current;audio.volume=0.8;if(audioEnabled){audio.play().catch(e=>console.log(\"Audio play blocked by browser\"));}// اكتشاف السيرفر\nconst initServer=async()=>{try{await discoverBestServer();}catch(error){}};initServer();// مراحل الأنيميشن (9 ثوانٍ)\nconst timers=[setTimeout(()=>setPhase(1),500),setTimeout(()=>setPhase(2),2000),setTimeout(()=>setPhase(3),7500),setTimeout(()=>{audio.pause();navigate('/login',{replace:true});},9000)];// مراقبة حالة التطبيق لإيقاف الانترو إذا خرج المستخدم (حسب الشروط)\nconst handleAppState=state=>{if(state.isActive&&audioEnabled){audio.play().catch(()=>{});}else{audio.pause();}};const listener=App.addListener('appStateChange',handleAppState);return()=>{timers.forEach(clearTimeout);audio.pause();listener.then(l=>l.remove());};},[navigate,audioEnabled]);return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-[10000] flex flex-col items-center justify-center overflow-hidden bg-[#E3DAD0] select-none\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-b from-white/20 to-transparent transition-opacity duration-1000 \".concat(phase>=1?'opacity-100':'opacity-0')}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex flex-col items-center justify-center w-full h-full max-h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute w-[150vw] h-[150vw] max-w-[800px] max-h-[800px] bg-[#1A365D] opacity-[0.04] rounded-full transition-transform duration-[8000ms] ease-out \".concat(phase>=2?'scale-150':'scale-0')}),/*#__PURE__*/_jsx(\"div\",{className:\"relative transition-all duration-1500 ease-out transform \".concat(phase===0?'scale-75 opacity-0':phase===1?'scale-110 opacity-100':phase===2?'scale-100 opacity-100':'scale-90 opacity-0'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative p-2 md:p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 border-2 border-[#1A365D]/10 rounded-full animate-spin-slow\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/logo.jpg\",alt:\"Logo\",className:\"relative h-32 w-32 md:h-48 md:w-48 rounded-full border-[4px] border-white shadow-2xl object-cover\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 md:mt-12 text-center transition-all duration-1000 delay-300 transform \".concat(phase>=1&&phase<3?'translate-y-0 opacity-100':'translate-y-10 opacity-0'),children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl md:text-7xl font-black text-[#1A365D] tracking-tight mb-4 drop-shadow-sm italic\",style:{fontFamily:'serif'},children:\"Careerak\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-[1.5px] w-10 md:w-16 bg-[#1A365D]/20\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[#1A365D]/80 font-black text-[13px] md:text-lg uppercase tracking-[0.2em] md:tracking-[0.3em]\",children:t.slogan}),/*#__PURE__*/_jsx(\"div\",{className:\"h-[1.5px] w-10 md:w-16 bg-[#1A365D]/20\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-10 md:bottom-20 w-48 md:w-64 h-[2px] md:h-[3px] bg-[#1A365D]/10 rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-[#1A365D] transition-all ease-linear\",style:{width:phase>=1?'100%':'0%',transitionDuration:'8500ms'}})})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","discoverBestServer","useAuth","App","jsx","_jsx","jsxs","_jsxs","entryTranslations","ar","slogan","en","fr","EntryPage","phase","setPhase","navigate","audioEnabled","language","t","audioRef","Audio","audio","current","volume","play","catch","e","console","log","initServer","error","timers","setTimeout","pause","replace","handleAppState","state","isActive","listener","addListener","forEach","clearTimeout","then","l","remove","className","children","concat","src","alt","style","fontFamily","width","transitionDuration"],"sources":["D:/Careerak/Careerak-vsc/frontend/src/pages/01_EntryPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { discoverBestServer } from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { App } from '@capacitor/app';\r\n\r\nconst entryTranslations = {\r\n  ar: { slogan: \"مستقبل الموارد البشرية\" },\r\n  en: { slogan: \"The Future of HR\" },\r\n  fr: { slogan: \"L'avenir des RH\" }\r\n};\r\n\r\nexport default function EntryPage() {\r\n  const [phase, setPhase] = useState(0);\r\n  const navigate = useNavigate();\r\n  const { audioEnabled, language } = useAuth();\r\n  const t = entryTranslations[language] || entryTranslations.ar;\r\n  const audioRef = useRef(new Audio('/intro.mp3'));\r\n\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    audio.volume = 0.8;\r\n    \r\n    if (audioEnabled) {\r\n      audio.play().catch(e => console.log(\"Audio play blocked by browser\"));\r\n    }\r\n\r\n    // اكتشاف السيرفر\r\n    const initServer = async () => {\r\n      try { await discoverBestServer(); } catch (error) {}\r\n    };\r\n    initServer();\r\n\r\n    // مراحل الأنيميشن (9 ثوانٍ)\r\n    const timers = [\r\n      setTimeout(() => setPhase(1), 500),\r\n      setTimeout(() => setPhase(2), 2000),\r\n      setTimeout(() => setPhase(3), 7500),\r\n      setTimeout(() => {\r\n        audio.pause();\r\n        navigate('/login', { replace: true });\r\n      }, 9000)\r\n    ];\r\n\r\n    // مراقبة حالة التطبيق لإيقاف الانترو إذا خرج المستخدم (حسب الشروط)\r\n    const handleAppState = (state) => {\r\n      if (state.isActive && audioEnabled) {\r\n        audio.play().catch(() => {});\r\n      } else {\r\n        audio.pause();\r\n      }\r\n    };\r\n\r\n    const listener = App.addListener('appStateChange', handleAppState);\r\n\r\n    return () => {\r\n      timers.forEach(clearTimeout);\r\n      audio.pause();\r\n      listener.then(l => l.remove());\r\n    };\r\n  }, [navigate, audioEnabled]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[10000] flex flex-col items-center justify-center overflow-hidden bg-[#E3DAD0] select-none\">\r\n      <div className={`absolute inset-0 bg-gradient-to-b from-white/20 to-transparent transition-opacity duration-1000 ${phase >= 1 ? 'opacity-100' : 'opacity-0'}`}></div>\r\n      \r\n      <div className=\"relative flex flex-col items-center justify-center w-full h-full max-h-screen\">\r\n        <div className=\"relative flex items-center justify-center\">\r\n          <div className={`absolute w-[150vw] h-[150vw] max-w-[800px] max-h-[800px] bg-[#1A365D] opacity-[0.04] rounded-full transition-transform duration-[8000ms] ease-out ${phase >= 2 ? 'scale-150' : 'scale-0'}`}></div>\r\n          \r\n          <div className={`relative transition-all duration-1500 ease-out transform ${\r\n            phase === 0 ? 'scale-75 opacity-0' : \r\n            phase === 1 ? 'scale-110 opacity-100' : \r\n            phase === 2 ? 'scale-100 opacity-100' : \r\n            'scale-90 opacity-0'\r\n          }`}>\r\n            <div className=\"relative p-2 md:p-4\">\r\n              <div className=\"absolute inset-0 border-2 border-[#1A365D]/10 rounded-full animate-spin-slow\"></div>\r\n              <img src=\"/logo.jpg\" alt=\"Logo\" className=\"relative h-32 w-32 md:h-48 md:w-48 rounded-full border-[4px] border-white shadow-2xl object-cover\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`mt-6 md:mt-12 text-center transition-all duration-1000 delay-300 transform ${phase >= 1 && phase < 3 ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'}`}>\r\n          <h1 className=\"text-5xl md:text-7xl font-black text-[#1A365D] tracking-tight mb-4 drop-shadow-sm italic\" style={{ fontFamily: 'serif' }}>Careerak</h1>\r\n          <div className=\"flex items-center justify-center gap-4\">\r\n            <div className=\"h-[1.5px] w-10 md:w-16 bg-[#1A365D]/20\"></div>\r\n            <p className=\"text-[#1A365D]/80 font-black text-[13px] md:text-lg uppercase tracking-[0.2em] md:tracking-[0.3em]\">{t.slogan}</p>\r\n            <div className=\"h-[1.5px] w-10 md:w-16 bg-[#1A365D]/20\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"absolute bottom-10 md:bottom-20 w-48 md:w-64 h-[2px] md:h-[3px] bg-[#1A365D]/10 rounded-full overflow-hidden\">\r\n        <div className=\"h-full bg-[#1A365D] transition-all ease-linear\" style={{ width: phase >= 1 ? '100%' : '0%', transitionDuration: '8500ms' }}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}