{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function OnboardingIlliterate(){const navigate=useNavigate();const{language,updateUser}=useAuth();const[step,setStep]=useState(0);const[loading,setLoading]=useState(false);const[isRecording,setIsRecording]=useState(false);const[isVisible,setIsVisible]=useState(false);const audioRef=useRef(null);useEffect(()=>{setIsVisible(true);playInstruction(0);},[]);const steps=[{id:'bio',icon:'üë§',voice:'/voices/tell_us_about_you.mp3',color:'bg-blue-500'},{id:'skills',icon:'üõ†Ô∏è',voice:'/voices/what_are_your_skills.mp3',color:'bg-green-500'},{id:'experience',icon:'üíº',voice:'/voices/your_experience.mp3',color:'bg-purple-500'},{id:'finish',icon:'‚úÖ',voice:'/voices/all_done.mp3',color:'bg-orange-500'}];const playInstruction=index=>{if(audioRef.current)audioRef.current.pause();audioRef.current=new Audio(steps[index].voice);audioRef.current.play().catch(e=>console.log(\"Audio play failed\"));};const handleMicClick=()=>{setIsRecording(!isRecording);// ŸáŸÜÿß Ÿäÿ™ŸÖ ÿØŸÖÿ¨ ŸÖŸÉÿ™ÿ®ÿ© SpeechRecognition ŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿßŸã\nif(isRecording){setTimeout(()=>{setIsRecording(false);if(step<steps.length-1){const nextStep=step+1;setStep(nextStep);playInstruction(nextStep);}else{finishRegistration();}},2000);}};const finishRegistration=async()=>{setLoading(true);try{// ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ© ÿµŸàÿ™ŸäÿßŸã (ÿ™ÿ≠ÿ™ ÿßŸÑÿ™ÿ∑ŸàŸäÿ±)\nconst res=await userService.updateProfile({isIlliterateMode:true});updateUser(res.data.user);navigate('/profile');}catch(e){console.error(e);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-[#E3DAD0] flex flex-col items-center justify-center p-6 transition-opacity duration-1000 \".concat(isVisible?'opacity-100':'opacity-0'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-lg bg-white rounded-[4rem] shadow-2xl p-12 text-center border-t-8 border-[#1A365D]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 \".concat(steps[step].color,\" rounded-full flex items-center justify-center mx-auto mb-10 shadow-xl transition-all duration-500\"),children:/*#__PURE__*/_jsx(\"span\",{className:\"text-6xl\",children:steps[step].icon})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center gap-2 mb-4\",children:steps.map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(i===step?'bg-[#1A365D] w-8':'bg-gray-200',\" transition-all duration-300\")},i))})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleMicClick,className:\"w-32 h-32 rounded-full flex items-center justify-center mx-auto transition-all duration-300 active:scale-90 shadow-2xl \".concat(isRecording?'bg-red-500 animate-ping':'bg-[#1A365D]'),children:/*#__PURE__*/_jsx(\"span\",{className:\"text-5xl text-white\",children:isRecording?'‚èπÔ∏è':'üé§'})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-8 text-[#1A365D] font-black text-xl\",children:isRecording?'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ... ÿ™ÿ≠ÿØŸëÿ´ ÿßŸÑÿ¢ŸÜ':'ÿßÿ∂ÿ∫ÿ∑ Ÿàÿ™ÿ≠ÿØÿ´'})]})});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useAuth","api","jsx","_jsx","jsxs","_jsxs","OnboardingIlliterate","navigate","language","updateUser","step","setStep","loading","setLoading","isRecording","setIsRecording","isVisible","setIsVisible","audioRef","playInstruction","steps","id","icon","voice","color","index","current","pause","Audio","play","catch","e","console","log","handleMicClick","setTimeout","length","nextStep","finishRegistration","res","userService","updateProfile","isIlliterateMode","data","user","error","className","concat","children","map","_","i","onClick"],"sources":["D:/Careerak/Careerak-vsc/frontend/src/pages/16_OnboardingIlliterate.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport api from '../services/api';\r\n\r\nexport default function OnboardingIlliterate() {\r\n  const navigate = useNavigate();\r\n  const { language, updateUser } = useAuth();\r\n  const [step, setStep] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  const audioRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    setIsVisible(true);\r\n    playInstruction(0);\r\n  }, []);\r\n\r\n  const steps = [\r\n    { id: 'bio', icon: 'üë§', voice: '/voices/tell_us_about_you.mp3', color: 'bg-blue-500' },\r\n    { id: 'skills', icon: 'üõ†Ô∏è', voice: '/voices/what_are_your_skills.mp3', color: 'bg-green-500' },\r\n    { id: 'experience', icon: 'üíº', voice: '/voices/your_experience.mp3', color: 'bg-purple-500' },\r\n    { id: 'finish', icon: '‚úÖ', voice: '/voices/all_done.mp3', color: 'bg-orange-500' }\r\n  ];\r\n\r\n  const playInstruction = (index) => {\r\n    if (audioRef.current) audioRef.current.pause();\r\n    audioRef.current = new Audio(steps[index].voice);\r\n    audioRef.current.play().catch(e => console.log(\"Audio play failed\"));\r\n  };\r\n\r\n  const handleMicClick = () => {\r\n    setIsRecording(!isRecording);\r\n    // ŸáŸÜÿß Ÿäÿ™ŸÖ ÿØŸÖÿ¨ ŸÖŸÉÿ™ÿ®ÿ© SpeechRecognition ŸÖÿ≥ÿ™ŸÇÿ®ŸÑÿßŸã\r\n    if (isRecording) {\r\n      setTimeout(() => {\r\n        setIsRecording(false);\r\n        if (step < steps.length - 1) {\r\n          const nextStep = step + 1;\r\n          setStep(nextStep);\r\n          playInstruction(nextStep);\r\n        } else {\r\n          finishRegistration();\r\n        }\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  const finishRegistration = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ© ÿµŸàÿ™ŸäÿßŸã (ÿ™ÿ≠ÿ™ ÿßŸÑÿ™ÿ∑ŸàŸäÿ±)\r\n      const res = await userService.updateProfile({ isIlliterateMode: true });\r\n      updateUser(res.data.user);\r\n      navigate('/profile');\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`min-h-screen bg-[#E3DAD0] flex flex-col items-center justify-center p-6 transition-opacity duration-1000 ${isVisible ? 'opacity-100' : 'opacity-0'}`}>\r\n\r\n      <div className=\"w-full max-w-lg bg-white rounded-[4rem] shadow-2xl p-12 text-center border-t-8 border-[#1A365D]\">\r\n\r\n        <div className={`w-32 h-32 ${steps[step].color} rounded-full flex items-center justify-center mx-auto mb-10 shadow-xl transition-all duration-500`}>\r\n          <span className=\"text-6xl\">{steps[step].icon}</span>\r\n        </div>\r\n\r\n        <div className=\"mb-12\">\r\n          <div className=\"flex justify-center gap-2 mb-4\">\r\n            {steps.map((_, i) => (\r\n              <div key={i} className={`w-3 h-3 rounded-full ${i === step ? 'bg-[#1A365D] w-8' : 'bg-gray-200'} transition-all duration-300`}></div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleMicClick}\r\n          className={`w-32 h-32 rounded-full flex items-center justify-center mx-auto transition-all duration-300 active:scale-90 shadow-2xl ${isRecording ? 'bg-red-500 animate-ping' : 'bg-[#1A365D]'}`}\r\n        >\r\n          <span className=\"text-5xl text-white\">{isRecording ? '‚èπÔ∏è' : 'üé§'}</span>\r\n        </button>\r\n\r\n        <p className=\"mt-8 text-[#1A365D] font-black text-xl\">\r\n          {isRecording ? 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ≥ÿ™ŸÖÿßÿπ... ÿ™ÿ≠ÿØŸëÿ´ ÿßŸÑÿ¢ŸÜ' : 'ÿßÿ∂ÿ∫ÿ∑ Ÿàÿ™ÿ≠ÿØÿ´'}\r\n        </p>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}