{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{userService}from'../services/api';import{App}from'@capacitor/app';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const loginTranslations={ar:{subtitle:\"تسجيل الدخول\",userPlaceholder:\"البريد الإلكتروني أو اسم المستخدم\",passPlaceholder:\"كلمة المرور\",loginBtn:\"دخول\",noAccount:\"ليس لديك حساب؟\",createAccount:\"أنشئ حساباً الآن\",error:\"فشل الدخول، تحقق من البيانات\"},en:{subtitle:\"Login\",userPlaceholder:\"Email or Username\",passPlaceholder:\"Password\",loginBtn:\"Login\",noAccount:\"Don't have an account?\",createAccount:\"Create account now\",error:\"Login failed, please check your credentials\"},fr:{subtitle:\"Connexion\",userPlaceholder:\"Email ou nom d'utilisateur\",passPlaceholder:\"Mot de passe\",loginBtn:\"Entrer\",noAccount:\"Pas de compte ?\",createAccount:\"Créer un compte\",error:\"Échec de la connexion, vérifiez vos identيفants\"}};export default function LoginPage(){const navigate=useNavigate();const{language,login:performLogin,startBgMusic}=useAuth();const t=loginTranslations[language]||loginTranslations.ar;const isRTL=language==='ar';const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[isVisible,setIsVisible]=useState(false);useEffect(()=>{setIsVisible(true);// بدء موسيقى الخلفية Music.mp3 فور فتح صفحة تسجيل الدخول (حسب الطلب)\nstartBgMusic();const backButtonListener=App.addListener('backButton',()=>{App.exitApp();});return()=>{backButtonListener.then(l=>l.remove());};},[startBgMusic]);const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{var _response$data$user$r;const response=await userService.login({email,password});await performLogin(response.data.user,response.data.token);const role=(_response$data$user$r=response.data.user.role)===null||_response$data$user$r===void 0?void 0:_response$data$user$r.toLowerCase();if(role==='admin'){navigate('/admin-dashboard');}else if(role==='hr'){if(!response.data.user.bio)navigate('/onboarding-companies');else navigate('/profile');}else{if(!response.data.user.bio)navigate('/onboarding-individuals');else navigate('/profile');}}catch(err){setError(t.error);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-[#E3DAD0] transition-opacity duration-1000 \".concat(isVisible?'opacity-100':'opacity-0'),dir:isRTL?'rtl':'ltr',children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-sm bg-white rounded-[3.5rem] shadow-2xl p-10 mx-4 relative overflow-hidden border border-white/50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 rounded-full border-4 border-[#1A365D] p-1 mb-4 shadow-xl overflow-hidden bg-white\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.jpg\",alt:\"Logo\",className:\"w-full h-full object-cover rounded-full\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-black text-[#1A365D] italic tracking-tighter\",style:{fontFamily:'serif'},children:\"Careerak\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[#1A365D]/40 font-bold text-sm mt-2\",children:t.subtitle})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 text-red-600 p-4 rounded-2xl text-[11px] font-black mb-6 text-center border border-red-100 animate-shake\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:t.userPlaceholder,className:\"w-full p-5 bg-gray-50 rounded-[2rem] border-2 border-transparent focus:border-[#1A365D]/10 focus:bg-white outline-none font-bold text-center transition-all placeholder:text-gray-300 shadow-inner\",value:email,onChange:e=>setEmail(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:t.passPlaceholder,className:\"w-full p-5 bg-gray-50 rounded-[2rem] border-2 border-transparent focus:border-[#1A365D]/10 focus:bg-white outline-none font-bold text-center transition-all placeholder:text-gray-300 shadow-inner\",value:password,onChange:e=>setPassword(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-[#1A365D] text-white p-6 rounded-[2.5rem] font-black text-xl shadow-xl active:scale-95 transition-all mt-6 flex items-center justify-center gap-3\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin\"}):t.loginBtn})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-10 text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs font-bold text-gray-400\",children:[t.noAccount,\" \",/*#__PURE__*/_jsx(\"span\",{onClick:()=>navigate('/auth'),className:\"text-[#1A365D] cursor-pointer hover:underline font-black\",children:t.createAccount})]})})]})});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","userService","App","useAuth","jsx","_jsx","jsxs","_jsxs","loginTranslations","ar","subtitle","userPlaceholder","passPlaceholder","loginBtn","noAccount","createAccount","error","en","fr","LoginPage","navigate","language","login","performLogin","startBgMusic","t","isRTL","email","setEmail","password","setPassword","loading","setLoading","setError","isVisible","setIsVisible","backButtonListener","addListener","exitApp","then","l","remove","handleSubmit","e","preventDefault","_response$data$user$r","response","data","user","token","role","toLowerCase","bio","err","className","concat","dir","children","src","alt","style","fontFamily","onSubmit","type","placeholder","value","onChange","target","required","disabled","onClick"],"sources":["D:/Careerak/Careerak-vsc/frontend/src/pages/03_LoginPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { userService } from '../services/api';\r\nimport { App } from '@capacitor/app';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst loginTranslations = {\r\n  ar: {\r\n    subtitle: \"تسجيل الدخول\",\r\n    userPlaceholder: \"البريد الإلكتروني أو اسم المستخدم\",\r\n    passPlaceholder: \"كلمة المرور\",\r\n    loginBtn: \"دخول\",\r\n    noAccount: \"ليس لديك حساب؟\",\r\n    createAccount: \"أنشئ حساباً الآن\",\r\n    error: \"فشل الدخول، تحقق من البيانات\"\r\n  },\r\n  en: {\r\n    subtitle: \"Login\",\r\n    userPlaceholder: \"Email or Username\",\r\n    passPlaceholder: \"Password\",\r\n    loginBtn: \"Login\",\r\n    noAccount: \"Don't have an account?\",\r\n    createAccount: \"Create account now\",\r\n    error: \"Login failed, please check your credentials\"\r\n  },\r\n  fr: {\r\n    subtitle: \"Connexion\",\r\n    userPlaceholder: \"Email ou nom d'utilisateur\",\r\n    passPlaceholder: \"Mot de passe\",\r\n    loginBtn: \"Entrer\",\r\n    noAccount: \"Pas de compte ?\",\r\n    createAccount: \"Créer un compte\",\r\n    error: \"Échec de la connexion, vérifiez vos identيفants\"\r\n  }\r\n};\r\n\r\nexport default function LoginPage() {\r\n  const navigate = useNavigate();\r\n  const { language, login: performLogin, startBgMusic } = useAuth();\r\n  const t = loginTranslations[language] || loginTranslations.ar;\r\n  const isRTL = language === 'ar';\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsVisible(true);\r\n\r\n    // بدء موسيقى الخلفية Music.mp3 فور فتح صفحة تسجيل الدخول (حسب الطلب)\r\n    startBgMusic();\r\n\r\n    const backButtonListener = App.addListener('backButton', () => {\r\n      App.exitApp();\r\n    });\r\n\r\n    return () => {\r\n      backButtonListener.then(l => l.remove());\r\n    };\r\n  }, [startBgMusic]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await userService.login({ email, password });\r\n      await performLogin(response.data.user, response.data.token);\r\n      \r\n      const role = response.data.user.role?.toLowerCase();\r\n\r\n      if (role === 'admin') {\r\n        navigate('/admin-dashboard');\r\n      } else if (role === 'hr') {\r\n        if (!response.data.user.bio) navigate('/onboarding-companies');\r\n        else navigate('/profile');\r\n      } else {\r\n        if (!response.data.user.bio) navigate('/onboarding-individuals');\r\n        else navigate('/profile');\r\n      }\r\n    } catch (err) {\r\n      setError(t.error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`min-h-screen flex items-center justify-center bg-[#E3DAD0] transition-opacity duration-1000 ${isVisible ? 'opacity-100' : 'opacity-0'}`} dir={isRTL ? 'rtl' : 'ltr'}>\r\n      <div className=\"w-full max-w-sm bg-white rounded-[3.5rem] shadow-2xl p-10 mx-4 relative overflow-hidden border border-white/50\">\r\n        \r\n        <div className=\"flex flex-col items-center mb-8\">\r\n          <div className=\"w-24 h-24 rounded-full border-4 border-[#1A365D] p-1 mb-4 shadow-xl overflow-hidden bg-white\">\r\n             <img src=\"/logo.jpg\" alt=\"Logo\" className=\"w-full h-full object-cover rounded-full\" />\r\n          </div>\r\n          <h1 className=\"text-4xl font-black text-[#1A365D] italic tracking-tighter\" style={{ fontFamily: 'serif' }}>Careerak</h1>\r\n          <p className=\"text-[#1A365D]/40 font-bold text-sm mt-2\">{t.subtitle}</p>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"bg-red-50 text-red-600 p-4 rounded-2xl text-[11px] font-black mb-6 text-center border border-red-100 animate-shake\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"relative group\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder={t.userPlaceholder}\r\n              className=\"w-full p-5 bg-gray-50 rounded-[2rem] border-2 border-transparent focus:border-[#1A365D]/10 focus:bg-white outline-none font-bold text-center transition-all placeholder:text-gray-300 shadow-inner\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"relative group\">\r\n            <input\r\n              type=\"password\"\r\n              placeholder={t.passPlaceholder}\r\n              className=\"w-full p-5 bg-gray-50 rounded-[2rem] border-2 border-transparent focus:border-[#1A365D]/10 focus:bg-white outline-none font-bold text-center transition-all placeholder:text-gray-300 shadow-inner\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-[#1A365D] text-white p-6 rounded-[2.5rem] font-black text-xl shadow-xl active:scale-95 transition-all mt-6 flex items-center justify-center gap-3\"\r\n          >\r\n            {loading ? <div className=\"w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin\"></div> : t.loginBtn}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"mt-10 text-center\">\r\n          <p className=\"text-xs font-bold text-gray-400\">\r\n            {t.noAccount} <span onClick={() => navigate('/auth')} className=\"text-[#1A365D] cursor-pointer hover:underline font-black\">{t.createAccount}</span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}