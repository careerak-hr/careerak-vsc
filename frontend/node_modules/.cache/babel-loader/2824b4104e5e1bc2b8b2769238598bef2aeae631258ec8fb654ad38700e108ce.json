{"ast":null,"code":"import axios from'axios';import{Preferences}from'@capacitor/preferences';import CryptoJS from'crypto-js';const SERVER_NAME='https://careerak-server.loca.lt';const LOCAL_IPS=['192.168.78.151','192.168.1.5','192.168.1.10','192.168.1.100','10.0.2.2'];const PORT='5000';const SECRET_KEY='careerak_secure_key_2024';const getInitialBaseURL=()=>{const manualURL=localStorage.getItem('manual_api_url');if(manualURL)return\"\".concat(manualURL,\"/api\");return\"\".concat(SERVER_NAME,\"/api\");};const api=axios.create({baseURL:getInitialBaseURL(),timeout:20000,// Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù„Ø© Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\nheaders:{'Bypass-Tunnel-Reminder':'true'}});export const discoverBestServer=async()=>{const candidates=[SERVER_NAME,\"http://localhost:\".concat(PORT),...LOCAL_IPS.map(ip=>\"http://\".concat(ip,\":\").concat(PORT))];const discoveryPromises=candidates.map(async url=>{try{const controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),2000);const response=await fetch(\"\".concat(url,\"/api/users/health-check\"),{method:'GET',signal:controller.signal,headers:{'Bypass-Tunnel-Reminder':'true'}}).catch(()=>null);clearTimeout(timeoutId);if(response&&response.ok)return\"\".concat(url,\"/api\");}catch(e){return null;}return null;});const results=await Promise.all(discoveryPromises);const workingURL=results.find(url=>url!==null);if(workingURL){api.defaults.baseURL=workingURL;await Preferences.set({key:'last_working_url',value:workingURL});return workingURL;}return api.defaults.baseURL;};const decryptToken=cipherText=>{try{const bytes=CryptoJS.AES.decrypt(cipherText,SECRET_KEY);return bytes.toString(CryptoJS.enc.Utf8);}catch(e){return null;}};api.interceptors.request.use(async config=>{try{const{value:encryptedToken}=await Preferences.get({key:'auth_token'});if(encryptedToken){const token=decryptToken(encryptedToken);if(token)config.headers.Authorization=\"Bearer \".concat(token);}}catch(error){}return config;},error=>Promise.reject(error));export const userService={register:userData=>api.post('/users/register',userData),login:credentials=>api.post('/users/login',credentials),getProfile:()=>api.get('/users/profile'),updateProfile:data=>api.put('/users/profile',data),parseCV:data=>api.post('/users/parse-cv',data),parseSocial:data=>api.post('/users/parse-social',data),// ðŸš€ ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„ØµÙˆØ±\nanalyzeImage:data=>api.post('/users/analyze-image',data)};export const jobPostingService={getAll:()=>api.get('/job-postings'),create:data=>api.post('/job-postings',data)};export const trainingCourseService={getAll:()=>api.get('/training-courses')};export const educationalCourseService={getAll:()=>api.get('/educational-courses')};export default api;","map":{"version":3,"names":["axios","Preferences","CryptoJS","SERVER_NAME","LOCAL_IPS","PORT","SECRET_KEY","getInitialBaseURL","manualURL","localStorage","getItem","concat","api","create","baseURL","timeout","headers","discoverBestServer","candidates","map","ip","discoveryPromises","url","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","signal","catch","clearTimeout","ok","e","results","Promise","all","workingURL","find","defaults","set","key","value","decryptToken","cipherText","bytes","AES","decrypt","toString","enc","Utf8","interceptors","request","use","config","encryptedToken","get","token","Authorization","error","reject","userService","register","userData","post","login","credentials","getProfile","updateProfile","data","put","parseCV","parseSocial","analyzeImage","jobPostingService","getAll","trainingCourseService","educationalCourseService"],"sources":["D:/Careerak/Careerak-vsc/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { Preferences } from '@capacitor/preferences';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst SERVER_NAME = 'https://careerak-server.loca.lt'; \r\nconst LOCAL_IPS = ['192.168.78.151', '192.168.1.5', '192.168.1.10', '192.168.1.100', '10.0.2.2'];\r\nconst PORT = '5000';\r\nconst SECRET_KEY = 'careerak_secure_key_2024';\r\n\r\nconst getInitialBaseURL = () => {\r\n  const manualURL = localStorage.getItem('manual_api_url');\r\n  if (manualURL) return `${manualURL}/api`;\r\n  return `${SERVER_NAME}/api`;\r\n};\r\n\r\nconst api = axios.create({\r\n  baseURL: getInitialBaseURL(),\r\n  timeout: 20000, // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù„Ø© Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\r\n  headers: { 'Bypass-Tunnel-Reminder': 'true' }\r\n});\r\n\r\nexport const discoverBestServer = async () => {\r\n  const candidates = [SERVER_NAME, `http://localhost:${PORT}`, ...LOCAL_IPS.map(ip => `http://${ip}:${PORT}`)];\r\n  const discoveryPromises = candidates.map(async (url) => {\r\n    try {\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 2000);\r\n      const response = await fetch(`${url}/api/users/health-check`, { method: 'GET', signal: controller.signal, headers: { 'Bypass-Tunnel-Reminder': 'true' } }).catch(() => null);\r\n      clearTimeout(timeoutId);\r\n      if (response && response.ok) return `${url}/api`;\r\n    } catch (e) { return null; }\r\n    return null;\r\n  });\r\n  const results = await Promise.all(discoveryPromises);\r\n  const workingURL = results.find(url => url !== null);\r\n  if (workingURL) {\r\n    api.defaults.baseURL = workingURL;\r\n    await Preferences.set({ key: 'last_working_url', value: workingURL });\r\n    return workingURL;\r\n  }\r\n  return api.defaults.baseURL;\r\n};\r\n\r\nconst decryptToken = (cipherText) => {\r\n  try {\r\n    const bytes = CryptoJS.AES.decrypt(cipherText, SECRET_KEY);\r\n    return bytes.toString(CryptoJS.enc.Utf8);\r\n  } catch (e) { return null; }\r\n};\r\n\r\napi.interceptors.request.use(async (config) => {\r\n  try {\r\n    const { value: encryptedToken } = await Preferences.get({ key: 'auth_token' });\r\n    if (encryptedToken) {\r\n      const token = decryptToken(encryptedToken);\r\n      if (token) config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n  } catch (error) {}\r\n  return config;\r\n}, (error) => Promise.reject(error));\r\n\r\nexport const userService = {\r\n  register: (userData) => api.post('/users/register', userData),\r\n  login: (credentials) => api.post('/users/login', credentials),\r\n  getProfile: () => api.get('/users/profile'),\r\n  updateProfile: (data) => api.put('/users/profile', data),\r\n  parseCV: (data) => api.post('/users/parse-cv', data),\r\n  parseSocial: (data) => api.post('/users/parse-social', data),\r\n  // ðŸš€ ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„ØµÙˆØ±\r\n  analyzeImage: (data) => api.post('/users/analyze-image', data) \r\n};\r\n\r\nexport const jobPostingService = {\r\n  getAll: () => api.get('/job-postings'),\r\n  create: (data) => api.post('/job-postings', data),\r\n};\r\n\r\nexport const trainingCourseService = {\r\n    getAll: () => api.get('/training-courses'),\r\n};\r\n\r\nexport const educationalCourseService = {\r\n    getAll: () => api.get('/educational-courses'),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}