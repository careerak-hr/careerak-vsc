# Device Test Component - ูููู ุงุฎุชุจุงุฑ ุงูุฃุฌูุฒุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูููู React ูุงุฎุชุจุงุฑ ุงููุงููุฑุง ูุงููููุฑูููู ูุจู ุงูุงูุถูุงู ูููุงุจูุฉ ุงูููุฏูู. ูุณูุญ ูููุณุชุฎุฏู ุจู:
- ุงุฎุชูุงุฑ ุงููุงููุฑุง ูุงููููุฑูููู ูู ูุงุฆูุฉ ุงูุฃุฌูุฒุฉ ุงููุชุงุญุฉ
- ูุนุงููุฉ ุงูููุฏูู ูู ุงููุงููุฑุง ุงููุฎุชุงุฑุฉ
- ุงุฎุชุจุงุฑ ูุณุชูู ุงูุตูุช ูู ุงููููุฑูููู
- ุงูุชุฃูุฏ ูู ุฃู ุงูุฃุฌูุฒุฉ ุชุนูู ุจุดูู ุตุญูุญ ูุจู ุงูุงูุถูุงู

## ๐ฏ ุงููุชุทูุจุงุช

- **Requirement 1.4**: ุงุฎุชุจุงุฑ ุงููุงููุฑุง ูุงููููุฑูููู ูุจู ุงูุงูุถูุงู
- **User Story 1**: ููุงุจูุงุช ููุฏูู ูุจุงุดุฑุฉ - ูุนูุงุฑ ุงููุจูู 4

## ๐ฆ ุงููููุงุช

```
frontend/src/components/VideoInterview/
โโโ DeviceTest.jsx           # ุงููููู ุงูุฑุฆูุณู
โโโ DeviceTest.css           # ุงูุชูุณููุงุช
โโโ README_DEVICE_TEST.md    # ูุฐุง ุงูููู

frontend/src/examples/
โโโ DeviceTestExample.jsx    # ูุซุงู ุงุณุชุฎุฏุงู
```

## ๐ ุงูุงุณุชุฎุฏุงู ุงูุณุฑูุน

### ุงุณุชูุฑุงุฏ ุงููููู

```jsx
import DeviceTest from './components/VideoInterview/DeviceTest';
```

### ุงุณุชุฎุฏุงู ุจุณูุท

```jsx
function PreInterviewPage() {
  const handleTestComplete = (deviceInfo) => {
    console.log('Selected devices:', deviceInfo);
    // deviceInfo = { cameraId, microphoneId, devicesWorking: true }
  };

  return (
    <DeviceTest 
      onTestComplete={handleTestComplete}
      language="ar"
    />
  );
}
```

### ุงุณุชุฎุฏุงู ูุน React Router

```jsx
import { useNavigate } from 'react-router-dom';
import DeviceTest from './components/VideoInterview/DeviceTest';

function PreInterviewPage() {
  const navigate = useNavigate();

  const handleTestComplete = (deviceInfo) => {
    // ุญูุธ ูุนูููุงุช ุงูุฃุฌูุฒุฉ
    localStorage.setItem('selectedDevices', JSON.stringify(deviceInfo));
    
    // ุงูุงูุชูุงู ูุตูุญุฉ ุงูููุงุจูุฉ
    navigate('/interview/room');
  };

  return <DeviceTest onTestComplete={handleTestComplete} language="ar" />;
}
```

### ุงุณุชุฎุฏุงู ูุน Context

```jsx
import { useApp } from '../context/AppContext';
import DeviceTest from './components/VideoInterview/DeviceTest';

function PreInterviewPage() {
  const { language } = useApp();

  const handleTestComplete = (deviceInfo) => {
    console.log('Devices ready:', deviceInfo);
  };

  return <DeviceTest onTestComplete={handleTestComplete} language={language} />;
}
```

## ๐ Props

| Prop | Type | Required | Default | Description |
|------|------|----------|---------|-------------|
| `onTestComplete` | `function` | โ Yes | - | ุฏุงูุฉ ุชูุณุชุฏุนู ุนูุฏ ุงูุชูุงู ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ |
| `language` | `string` | โ No | `'ar'` | ุงููุบุฉ (`'ar'`, `'en'`, `'fr'`) |

### onTestComplete Callback

```typescript
onTestComplete(deviceInfo: {
  cameraId: string;        // ูุนุฑู ุงููุงููุฑุง ุงููุฎุชุงุฑุฉ
  microphoneId: string;    // ูุนุฑู ุงููููุฑูููู ุงููุฎุชุงุฑ
  devicesWorking: boolean; // true ุฅุฐุง ูุงูุช ุงูุฃุฌูุฒุฉ ุชุนูู
})
```

## ๐จ ุงูููุฒุงุช

### 1. ุงุฎุชูุงุฑ ุงูุฃุฌูุฒุฉ
- ูุงุฆูุฉ ููุณุฏูุฉ ูุฌููุน ุงููุงููุฑุงุช ุงููุชุงุญุฉ
- ูุงุฆูุฉ ููุณุฏูุฉ ูุฌููุน ุงููููุฑููููุงุช ุงููุชุงุญุฉ
- ุงุฎุชูุงุฑ ุชููุงุฆู ููุฌูุงุฒ ุงูุงูุชุฑุงุถู

### 2. ุงุฎุชุจุงุฑ ุงููุงููุฑุง
- ูุนุงููุฉ ููุฏูู ูุจุงุดุฑุฉ
- ูุคุดุฑ ูุฌุงุญ ุงูุงุฎุชุจุงุฑ
- ุฅููุงููุฉ ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ

### 3. ุงุฎุชุจุงุฑ ุงููููุฑูููู
- ูููุงุณ ูุณุชูู ุงูุตูุช ูู ุงูููุช ุงููุนูู
- ูุคุดุฑ ุจุตุฑู ููุตูุช (ุดุฑูุท ูููู)
- ูุณุจุฉ ูุฆููุฉ ููุณุชูู ุงูุตูุช
- ูุคุดุฑ ูุฌุงุญ ุงูุงุฎุชุจุงุฑ

### 4. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- ูุนุงูุฌุฉ ุฑูุถ ุงูุฅุฐู
- ูุนุงูุฌุฉ ุนุฏู ุชููุฑ ุงูุฃุฌูุฒุฉ

### 5. ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช
- ุงูุนุฑุจูุฉ (ar)
- ุงูุฅูุฌููุฒูุฉ (en)
- ุงููุฑูุณูุฉ (fr)

### 6. ุชุตููู ูุชุฌุงูุจ
- ูุนูู ุนูู Desktop
- ูุนูู ุนูู Tablet
- ูุนูู ุนูู Mobile

## ๐ง ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **WebRTC APIs**:
  - `navigator.mediaDevices.getUserMedia()` - ุงูุญุตูู ุนูู stream
  - `navigator.mediaDevices.enumerateDevices()` - ูุงุฆูุฉ ุงูุฃุฌูุฒุฉ
  
- **Web Audio API**:
  - `AudioContext` - ูุนุงูุฌุฉ ุงูุตูุช
  - `AnalyserNode` - ุชุญููู ูุณุชูู ุงูุตูุช
  - `MediaStreamSource` - ูุตุฏุฑ ุงูุตูุช

- **React Hooks**:
  - `useState` - ุฅุฏุงุฑุฉ ุงูุญุงูุฉ
  - `useEffect` - ุงูุชุฃุซูุฑุงุช ุงูุฌุงูุจูุฉ
  - `useRef` - ุงููุฑุงุฌุน

## ๐ ุชุฏูู ุงูุนูู

```
1. ุชุญููู ุงููููู
   โ
2. ุทูุจ ุงูุฅุฐู ูููุตูู ููุฃุฌูุฒุฉ
   โ
3. ุชุญููู ูุงุฆูุฉ ุงูุฃุฌูุฒุฉ ุงููุชุงุญุฉ
   โ
4. ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงููุงููุฑุง ููุฎุชุจุฑูุง
   โ
5. ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงููููุฑูููู ููุฎุชุจุฑู
   โ
6. ุนูุฏ ูุฌุงุญ ุงูุงุฎุชุจุงุฑููุ ูุชู ุชูุนูู ุฒุฑ "ูุชุงุจุนุฉ"
   โ
7. ุงููุณุชุฎุฏู ูููุฑ "ูุชุงุจุนุฉ"
   โ
8. ุงุณุชุฏุนุงุก onTestComplete ูุน ูุนูููุงุช ุงูุฃุฌูุฒุฉ
```

## ๐ฏ ูุนุงููุฑ ุงููุจูู

- โ ุงููุณุชุฎุฏู ููููู ุงุฎุชูุงุฑ ุงููุงููุฑุง ูู ูุงุฆูุฉ
- โ ุงููุณุชุฎุฏู ููููู ุงุฎุชูุงุฑ ุงููููุฑูููู ูู ูุงุฆูุฉ
- โ ูุนุงููุฉ ููุฏูู ูุจุงุดุฑุฉ ูู ุงููุงููุฑุง
- โ ูููุงุณ ูุณุชูู ุงูุตูุช ูู ุงูููุช ุงููุนูู
- โ ูุคุดุฑุงุช ูุฌุงุญ ูุงุถุญุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
- โ ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช
- โ ุชุตููู ูุชุฌุงูุจ

## ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

- ุทูุจ ุฅุฐู ุตุฑูุญ ูู ุงููุณุชุฎุฏู
- ูุง ูุชู ุญูุธ ุฃู ููุฏูู ุฃู ุตูุช
- ุฅููุงู ุฌููุน streams ุนูุฏ ุฅูุบุงุก ุงูุชุญููู
- ูุง ูุชู ุฅุฑุณุงู ุฃู ุจูุงูุงุช ููุฎุงุฏู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### "Permission denied"
- ุงููุณุชุฎุฏู ุฑูุถ ุงูุฅุฐู
- ุงูุญู: ุงุทูุจ ูู ุงููุณุชุฎุฏู ุงูุณูุงุญ ุจุงููุตูู ูู ุฅุนุฏุงุฏุงุช ุงููุชุตูุญ

### "No devices found"
- ูุง ุชูุฌุฏ ูุงููุฑุง ุฃู ูููุฑูููู ูุชุตู
- ุงูุญู: ุชุฃูุฏ ูู ุชูุตูู ุงูุฃุฌูุฒุฉ

### "Device error"
- ุฎุทุฃ ูู ุงููุตูู ููุฃุฌูุฒุฉ
- ุงูุญู: ุชุญูู ูู ุฃู ุงูุฃุฌูุฒุฉ ุบูุฑ ูุณุชุฎุฏูุฉ ูู ุชุทุจูู ุขุฎุฑ

### ุงูููุฏูู ูุง ูุธูุฑ
- ุชุญูู ูู ุฃู ุงููุงููุฑุง ูุฎุชุงุฑุฉ ุจุดูู ุตุญูุญ
- ุชุญูู ูู ุฃู ุฒุฑ "ุงุฎุชุจุงุฑ ุงููุงููุฑุง" ุชู ุงูููุฑ ุนููู

### ูุณุชูู ุงูุตูุช ูุง ูุชุญุฑู
- ุชุญุฏุซ ุจุตูุช ุฃุนูู
- ุชุญูู ูู ุฃู ุงููููุฑูููู ูุฎุชุงุฑ ุจุดูู ุตุญูุญ
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุตูุช ูู ุงููุธุงู

## ๐ฑ ุฏุนู ุงููุชุตูุญุงุช

| ุงููุชุตูุญ | ุงูุฅุตุฏุงุฑ | ุงูุฏุนู |
|---------|---------|-------|
| Chrome | 74+ | โ ูุงูู |
| Firefox | 66+ | โ ูุงูู |
| Safari | 12+ | โ ูุงูู |
| Edge | 79+ | โ ูุงูู |
| Opera | 62+ | โ ูุงูู |

## ๐จ ุงูุชุฎุตูุต

### ุชุบููุฑ ุงูุฃููุงู

```css
/* ูู DeviceTest.css */
.device-test-container {
  background: linear-gradient(135deg, #YourColor1 0%, #YourColor2 100%);
}

.device-test-button {
  border-color: #YourAccentColor;
  color: #YourAccentColor;
}
```

### ุฅุถุงูุฉ ูุบุฉ ุฌุฏูุฏุฉ

```jsx
// ูู DeviceTest.jsx
const translations = {
  ar: { /* ... */ },
  en: { /* ... */ },
  fr: { /* ... */ },
  es: { // ุฅุณุจุงููุฉ
    title: 'Prueba de cรกmara y micrรณfono',
    // ...
  }
};
```

## ๐ ุฃูุซูุฉ ุฅุถุงููุฉ

### ุญูุธ ุงูุฃุฌูุฒุฉ ุงููุฎุชุงุฑุฉ

```jsx
const handleTestComplete = (deviceInfo) => {
  // ุญูุธ ูู localStorage
  localStorage.setItem('preferredCamera', deviceInfo.cameraId);
  localStorage.setItem('preferredMicrophone', deviceInfo.microphoneId);
  
  // ุฃู ุญูุธ ูู state management
  dispatch(setDevices(deviceInfo));
};
```

### ุงุณุชุฎุฏุงู ุงูุฃุฌูุฒุฉ ุงููุญููุธุฉ

```jsx
// ูู VideoCall component
const savedCamera = localStorage.getItem('preferredCamera');
const savedMicrophone = localStorage.getItem('preferredMicrophone');

const stream = await navigator.mediaDevices.getUserMedia({
  video: { deviceId: savedCamera ? { exact: savedCamera } : undefined },
  audio: { deviceId: savedMicrophone ? { exact: savedMicrophone } : undefined }
});
```

## ๐ ุงููููุงุช ุฐุงุช ุงูุตูุฉ

- `VideoCall.jsx` - ูููู ุงูููุงุจูุฉ ุงูุฑุฆูุณู
- `WebRTCService.js` - ุฎุฏูุฉ WebRTC
- `WaitingRoom.jsx` - ุบุฑูุฉ ุงูุงูุชุธุงุฑ (ุชุณุชุฎุฏู DeviceTest)

## ๐ ููุงุญุธุงุช

- ูุฌุจ ุงุณุชุฎุฏุงู HTTPS ูู ุงูุฅูุชุงุฌ (WebRTC ูุชุทูุจ ุฐูู)
- ุงูุงุฎุชุจุงุฑ ูุณุชุบุฑู ุญูุงูู 30-60 ุซุงููุฉ
- ูููุตุญ ุจุงุณุชุฎุฏุงู ุงููููู ูุจู ุงูุงูุถูุงู ูุจุงุดุฑุฉ
- ูููู ุงุณุชุฎุฏุงูู ูู ุบุฑูุฉ ุงูุงูุชุธุงุฑ

## โ ุงูุญุงูุฉ

- [x] ุงููููู ุงูุฃุณุงุณู
- [x] ุงุฎุชุจุงุฑ ุงููุงููุฑุง
- [x] ุงุฎุชุจุงุฑ ุงููููุฑูููู
- [x] ูููุงุณ ูุณุชูู ุงูุตูุช
- [x] ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช
- [x] ุชุตููู ูุชุฌุงูุจ
- [x] ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- [x] ุงูุชูุซูู

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2026-03-01  
**ุขุฎุฑ ุชุญุฏูุซ**: 2026-03-01  
**ุงูุญุงูุฉ**: โ ููุชูู
